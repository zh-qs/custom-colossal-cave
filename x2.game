player:
  parameters:
    - dark:
        value: 0
    - wasdark:
        value: 0
    - lamplimit:
        value: 0
    - turns:
        value: 0
    - dflag:
        value: 0
    - foobar:
        value: 0
    - foobarcmdcnt:
        value: 0
    - closed:
        value: 0
    - closing:
        value: 0
    - panic:
        value: 0
    - clock2:
        value: 0
    - treasuresUnableToFind:
        value: 0
    - treasuresNotFound:
        value: 0
    - score:
        value: 0
    - notquit:
        value: 1
    - maxdie:
        value: 3
    - numdie:
        value: 0
    - toNextRank:
        value: 0
    - endbonus:
        value: 10
    - find50:
        value: 0
    - find51:
        value: 0
    - find52:
        value: 0
    - find53:
        value: 0
    - find54:
        value: 0
    - find55:
        value: 0
    - find56:
        value: 0
    - find57:
        value: 0
    - find58:
        value: 0
    - find59:
        value: 0
    - find60:
        value: 0
    - find61:
        value: 0
    - find62:
        value: 0
    - find63:
        value: 0
    - find64:
        value: 0
    - param1:
        value: 0
    - param2:
        value: 0
    - param3:
        value: 0
    - param4:
        value: 0
    - param5:
        value: 0
    - param6:
        value: 0
    - param7:
        value: 0
    - param8:
        value: 0
    - param9:
        value: 0
    - param10:
        value: 0
    - param11:
        value: 0
    - param12:
        value: 0
    - param13:
        value: 0
    - param14:
        value: 0
    - param15:
        value: 0
    - param16:
        value: 0
    - param17:
        value: 0
    - param18:
        value: 0
    - param19:
        value: 0
    - param20:
        value: 0
    - param21:
        value: 0
    - param22:
        value: 0
    - param23:
        value: 0
    - param24:
        value: 0
    - param25:
        value: 0
    - param26:
        value: 0
    - param27:
        value: 0
    - param28:
        value: 1
    - param29:
        value: 0
    - param30:
        value: 0
    - param31:
        value: 0
    - param32:
        value: 0
    - param33:
        value: 0
    - param34:
        value: 0
    - param35:
        value: 0
    - param36:
        value: 0
    - param37:
        value: 0
    - param38:
        value: 0
    - param39:
        value: 0
    - param40:
        value: 0
    - param50:
        value: 0
    - param51:
        value: 0
    - param52:
        value: 0
    - param53:
        value: 0
    - param54:
        value: 0
    - param55:
        value: 0
    - param56:
        value: 0
    - param57:
        value: 0
    - param58:
        value: 0
    - param59:
        value: 0
    - param60:
        value: 0
    - param61:
        value: 0
    - param62:
        value: 1
    - param63:
        value: 0
    - param64:
        value: 1
  inventory:
  leftHand:
    empty
  rightHand:
    empty
initialMessage:

finalMessage:
items:
  - KEYS:
      longName: SET OF KEYS
      description:
        - player.param1 == 0:
            THERE ARE SOME KEYS ON THE GROUND HERE.
      commands:
        - UNLOCK,OPEN,LOCK,CLOSE:
            {
              println YOU CAN'T LOCK NOR UNLOCK THE KEYS.
            }
  - LAMP:
      longName: BRASS LANTERN
      description:
        - player.param2 == 0:
            THERE IS A SHINY BRASS LAMP NEARBY.
        - player.param2 == 1:
            THERE IS A LAMP SHINING NEARBY.
      commands:
        - LIGHT,ON:
            {
              player.param2 = 1
              println OK
            }
        - EXTINGUISH,OFF:
            {
              player.param2 = 0
              println OK
            }
  - GRATE:
      longName: *GRATE
      description:
        - player.param3 == 0:
            THE GRATE IS LOCKED.
        - player.param3 == 1:
            THE GRATE IS OPEN.
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
        - UNLOCK,OPEN:
            {
              if player.param3 == 1 then
              {
                println IT WAS ALREADY UNLOCKED.
              }
              else
              {
                if !has KEYS then
                {
                  println YOU HAVE NO KEYS!
                }
                else
                {
                  player.param3 = 1
                  println THE GRATE IS NOW UNLOCKED.
                }
              }
            }
        - LOCK,CLOSE:
            {
              if player.param3 == 0 then
              {
                println IT WAS ALREADY LOCKED.
              }
              else
              {
                if !has KEYS then
                {
                  println YOU HAVE NO KEYS!
                }
                else
                {
                  player.param3 = 0
                  println THE GRATE IS NOW LOCKED.
                }
              }
            }
  - CAGE:
      longName: WICKER CAGE
      description:
        - player.param4 == 0:
            THERE IS A SMALL WICKER CAGE DISCARDED NEARBY.
      commands:
        - DROP,RELEASE,FREE,DISCARD,DUMP,THROW,TOSS:
            {
              if player.param8 == 1 then
              {
                drop BIRD
              }
              global item.DROP
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if has then
              {
                println YOU ARE ALREADY CARRYING IT!
              }
              else
		          {
    		        if invcount < 7 then
		    	      {
		              take
                  if player.param8 == 1 then
                  {
                    take BIRD
                  }
		              println OK
    			      }
		    	      else
			          {
			            println YOU CAN'T CARRY ANYTHING MORE.	YOU'LL HAVE TO DROP SOMETHING FIRST.
    			      }
		          }
            }
        - UNLOCK,OPEN,LOCK,CLOSE:
            {
              println IT HAS NO LOCK.
            }
  - ROD:
      longName: BLACK ROD
      description:
        - player.param5 == 0:
            A THREE FOOT BLACK ROD WITH A RUSTY STAR ON AN END LIES NEARBY.
      commands:
        - WAVE,SHAKE,SWING:
            {
              global room.WAVE
            }
  - ROD2:
      longName: BLACK ROD
      description:
        - player.param6 == 0:
            A THREE FOOT BLACK ROD WITH A RUSTY MARK ON AN END LIES NEARBY.
      commands:
  - STEPS:
      longName: *STEPS
      description:
        - in room14:
            ROUGH STONE STEPS LEAD DOWN THE PIT.
        - in room15:
            ROUGH STONE STEPS LEAD UP THE DOME.
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - BIRD:
      longName: LITTLE BIRD IN CAGE
      description:
        - player.param8 == 0:
            A CHEERFUL LITTLE BIRD IS SITTING HERE SINGING.
        - player.param8 == 1:
            THERE IS A LITTLE BIRD IN THE CAGE.
      commands:
        - FEED:
            {
              println IT'S NOT HUNGRY (IT'S MERELY PININ' FOR THE FJORDS).  BESIDES, YOU
              println HAVE NO BIRD SEED.
            }
        - EAT,DEVOUR:
            {
              println I THINK I JUST LOST MY APPETITE.
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if has then
              {
                println YOU ARE ALREADY CARRYING IT!
              }
              else
              {
                if player.param8 != 0 then
                {
                  if invcount < 7 then
                  {
                    take CAGE
                    take BIRD
                    println OK
                  }
                  else
                  {
                    println YOU CAN'T CARRY ANYTHING MORE.	YOU'LL HAVE TO DROP SOMETHING FIRST.
                  }
                }
                else
                {
                  if !has ROD && has CAGE then
                  {
                    if has CAGE then
                    {
                      player.param8 = 1
                      take BIRD
                      println OK
                    }
                    else
                    {
                      println YOU CAN CATCH THE BIRD, BUT YOU CANNOT CARRY IT.
                    }
                  }
                  else
                  {
                    println THE BIRD WAS UNAFRAID WHEN YOU ENTERED, BUT AS YOU APPROACH IT BECOMES
                    println DISTURBED AND YOU CANNOT CATCH IT.
                  }
                }
              }
            }
        - RELEASE,FREE,THROW:
            {
              if present SNAKE then
              {
                if player.closed == 1 then
                {
                  println THE RESULTING RUCKUS HAS AWAKENED THE DWARVES.	THERE ARE NOW SEVERAL
                  println THREATENING LITTLE DWARVES IN THE ROOM WITH YOU!  MOST OF THEM THROW
                  println KNIVES AT YOU!	ALL OF THEM GET YOU!
                  global room.die
                }
                else
                {
                  println DRIVES THE SNAKE AWAY.
                  remove SNAKE
                  player.param11 = 1
                  player.param8 = 0
                  drop
                }
              }
              else
              {
                if present DRAGON && player.param31 == 0 then
                {
                  println THE LITTLE BIRD ATTACKS THE GREEN DRAGON, AND IN AN ASTOUNDING FLURRY
                  println GETS BURNT TO A CINDER.  THE ASHES BLOW AWAY.
                  discard
                  if present SNAKE in room19 then
                  {
                    player.treasuresUnableToFind += 1
                  }
                }
                else
                {
                  drop
                  println OK
                }
                player.param8 = 0
              }
            }
  - DOOR:
      longName: *RUSTY DOOR
      description:
        - player.param9 == 0:
            THE WAY NORTH IS BARRED BY A MASSIVE, RUSTY, IRON DOOR.
        - player.param9 == 1:
            THE WAY NORTH LEADS THROUGH A MASSIVE, RUSTY, IRON DOOR.
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
        - UNLOCK,OPEN:
            {
              if player.param9 == 0 then
              {
                println THE DOOR IS EXTREMELY RUSTY AND REFUSES TO OPEN.
              }
              else
              {
                println THE DOOR IS ALREADY OPEN.
              }
            }
        - LOCK,CLOSE:
            {
              if player.param9 == 1 then
              {
                println THE DOOR IS EXTREMELY RUSTY AND REFUSES TO MOVE.
              }
              else
              {
                println THE DOOR IS ALREADY OPEN.
              }
            }
  - PILLOW:
      longName: VELVET PILLOW
      description:
        - player.param10 == 0:
            A SMALL VELVET PILLOW LIES ON THE FLOOR.
      commands:
  - SNAKE:
      longName: *SNAKE
      description:
        - player.param11 == 0:
            A HUGE GREEN FIERCE SNAKE BARS THE WAY!
        - player.param11 == 1:
            
      commands:
        - FEED:
            {
              if present BIRD && player.closed == 0 then
              {
                remove BIRD
                player.param8 = 0
                player.treasuresUnableToFind += 1
                println THE SNAKE HAS NOW DEVOURED YOUR BIRD.
              }
              else
              {
                println THERE'S NOTHING HERE IT WANTS TO EAT (EXCEPT PERHAPS YOU).
              }
            }
        - EAT,DEVOUR:
            {
              println I THINK I JUST LOST MY APPETITE.
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - FISSURE:
      longName: *FISSURE
      description:
        - player.param12 == 0:
            
        - player.param12 == 1:
            A CRYSTAL BRIDGE NOW SPANS THE FISSURE.
        - player.param12 == 2:
            THE CRYSTAL BRIDGE HAS VANISHED!
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - TABLET:
      longName: *STONE TABLET
      description:
        - player.param13 == 0:
            A MASSIVE STONE TABLET IMBEDDED IN THE WALL READS:
            "CONGRATULATIONS ON BRINGING LIGHT INTO THE DARK-ROOM!"
      commands:
        - READ:
            {
              println "CONGRATULATIONS ON BRINGING LIGHT INTO THE DARK-ROOM!"
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - CLAM:
      longName: GIANT CLAM  >GRUNT!<
      description:
        - player.param14 == 0:
            THERE IS AN ENORMOUS CLAM HERE WITH ITS SHELL TIGHTLY CLOSED.
      commands:
        - EAT,DEVOUR:
            {
              println I THINK I JUST LOST MY APPETITE.
            }
        - UNLOCK,OPEN:
            {
              if has then
              {
                println I ADVISE YOU TO PUT DOWN THE CLAM BEFORE OPENING IT.  >STRAIN!<
              }
              else
              {
                if !has TRIDENT then
                {
                  println YOU DON'T HAVE ANYTHING STRONG ENOUGH TO OPEN THE CLAM.
                }
                else
                {
                  println A GLISTENING PEARL FALLS OUT OF THE CLAM AND ROLLS AWAY.  GOODNESS,
                  println THIS MUST REALLY BE AN OYSTER.	(I NEVER WAS VERY GOOD AT IDENTIFYING
                  println BIVALVES.)  WHATEVER IT IS, IT HAS NOW SNAPPED SHUT AGAIN.
                  discard
                  put OYSTER
                  put PEARL in room105
                }
              }
              
            }
  - OYSTER:
      longName: GIANT OYSTER  >GROAN!<
      description:
        - player.param15 == 0:
            THERE IS AN ENORMOUS OYSTER HERE WITH ITS SHELL TIGHTLY CLOSED.
        - player.param15 == 1:
            INTERESTING.  THERE SEEMS TO BE SOMETHING WRITTEN ON THE UNDERSIDE OF
            THE OYSTER.
      commands:
        - READ,PERUSE:
            {
              if has then
              {
                if player.closed == 0 then
                {
                  println IT SAYS THE SAME THING IT DID BEFORE.
                }
                else
                {
                  println HMMM, THIS LOOKS LIKE A CLUE, WHICH MEANS IT'LL COST YOU 10 POINTS TO
                  println READ IT.  SHOULD I GO AHEAD AND READ IT ANYWAY?
                  if askYesNo then
                  {
                    player.score -= 10
                    println IT SAYS, "THERE IS SOMETHING STRANGE ABOUT THIS PLACE, SUCH THAT ONE
                    println OF THE WORDS I'VE ALWAYS KNOWN NOW HAS A NEW EFFECT."
                  }
                  else
                  {
                    println OK
                  }
                }
              }
              else
              {
                println HUH...
              }
              
            }
        - EAT,DEVOUR:
            {
              println I THINK I JUST LOST MY APPETITE.
            }
        - UNLOCK,OPEN:
            {
              if has then
              {
                println I ADVISE YOU TO PUT DOWN THE OYSTER BEFORE OPENING IT.  >WRENCH!<
              }
              else
              {
                if !has TRIDENT then
                {
                  println YOU DON'T HAVE ANYTHING STRONG ENOUGH TO OPEN THE OYSTER.
                }
                else
                {
                  println THE OYSTER CREAKS OPEN, REVEALING NOTHING BUT OYSTER INSIDE.  IT
                  println PROMPTLY SNAPS SHUT AGAIN.
                }
              }
              
            }
  - MAGAZINE:
      longName: "SPELUNKER TODAY"
      description:
        - player.param16 == 0:
            THERE ARE A FEW RECENT ISSUES OF "SPELUNKER TODAY" MAGAZINE HERE.
      commands:
        - READ,PERUSE:
            {
              println I'M AFRAID THE MAGAZINE IS WRITTEN IN DWARVISH.
            }
  - DWARF:
      longName: 
      description:
      commands:
        - WAKE,DISTURB:
            {
              if player.closing == 0 then
              {
                println SHHHH!
              }
              else
              {
                println YOU PROD THE NEAREST DWARF, WHO WAKES UP GRUMPILY, TAKES ONE LOOK AT
                println YOU, CURSES, AND GRABS FOR HIS AXE.
                global room.die
              }
            }
        - FEED:
            {
              if present FOOD then
              {
                println YOU FOOL, DWARVES EAT ONLY COAL!  NOW YOU'VE MADE HIM *REALLY* MAD!!
                player.dflag += 1
              }
              else
              {
                println YOU HAVE NOTHING TO FEED THE DWARF!
              }
            }
        - EAT,DEVOUR:
            {
              println I THINK I JUST LOST MY APPETITE.
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - KNIFE:
      longName: 
      description:
      commands:
  - FOOD:
      longName: TASTY FOOD
      description:
        - player.param19 == 0:
            THERE IS FOOD HERE.
      commands:
  - BOTTLE:
      longName: SMALL BOTTLE
      description:
        - player.param20 == 0:
            THERE IS A BOTTLE OF WATER HERE.
        - player.param20 == 1:
            THERE IS AN EMPTY BOTTLE HERE.
        - player.param20 == 2:
            THERE IS A BOTTLE OF OIL HERE.
      commands:
        - FILL:
            {
              if player.param20 != 1 then
              {
                println YOUR BOTTLE IS ALREADY FULL.
              }
              else
              {
                if present WATER then
                {
                  println YOUR BOTTLE IS NOW FULL OF WATER.
                  player.param20 = 0
                }
                else
                {
                  if present OIL then
                  {
                    println YOUR BOTTLE IS NOW FULL OF OIL.
                    player.param20 = 2
                  }
                  else
                  {
                    println THERE IS NOTHING HERE WITH WHICH TO FILL THE BOTTLE.
                  }
                }
              }
            }
        - POUR:
            {
              if player.param20 == 1 then
              {
                println YOUR BOTTLE IS EMPTY.
              }
              else
              {
                if present PLANT then
                {
                  if player.param20 == 2 then
                  {
                    println THE PLANT INDIGNANTLY SHAKES THE OIL OFF ITS LEAVES AND ASKS, "WATER?"
                  }
                  else
                  {
                    if player.param24 == 0 then
                    {
                      println THE PLANT SPURTS INTO FURIOUS GROWTH FOR A FEW SECONDS.
                      player.param24 = 2
                    }
                    else
                    {
                    if player.param24 == 2 then
                    {
                      println THE PLANT GROWS EXPLOSIVELY, ALMOST FILLING THE BOTTOM OF THE PIT.
                      player.param24 = 4
                    }
                    else
                    {
                      println YOU'VE OVER-WATERED THE PLANT!
                      player.param24 = 0
                    }
                    }
                    player.param25 = player.param24 / 2
                  }
                }
                if present DOOR then
                {
                  if player.param20 == 2 then
                  {
                    player.param9 = 1
                    println THE OIL HAS FREED UP THE HINGES SO THAT THE DOOR WILL NOW MOVE,
                    println ALTHOUGH IT REQUIRES SOME EFFORT.
                  }
                  else
                  {
                    println THE HINGES ARE QUITE THOROUGHLY RUSTED NOW AND WON'T BUDGE.
                  }
                }
                player.param20 = 1
              }
            }
  - WATER:
      longName: WATER IN THE BOTTLE
      description:
      commands:
        - DRINK:
            {
              if present BOTTLE && player.param20 == 0 then
              {
                player.param20 = 1
                println THE BOTTLE OF WATER IS NOW EMPTY.
              }
              else
              {
                println YOU HAVE TAKEN A DRINK FROM THE STREAM.  THE WATER TASTES STRONGLY OF
                println MINERALS, BUT IS NOT UNPLEASANT.  IT IS EXTREMELY COLD.
              }
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if has BOTTLE then
              {
                if player.param20 == 1 then
                {
                  player.param20 = 0
                  println YOUR BOTTLE IS NOW FULL OF WATER.
                }
                else
                {
                  println YOUR BOTTLE IS ALREADY FULL.
                }
              }
              else
              {
                println YOU HAVE NOTHING IN WHICH TO CARRY IT.
              }
            }
  - OIL:
      longName: OIL IN THE BOTTLE
      description:
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if has BOTTLE then
              {
                if player.param20 == 1 then
                {
                  player.param20 = 2
                  println YOUR BOTTLE IS NOW FULL OF OIL.
                }
                else
                {
                  println YOUR BOTTLE IS ALREADY FULL.
                }
              }
              else
              {
                println YOU HAVE NOTHING IN WHICH TO CARRY IT.
              }
            }
  - MIRROR:
      longName: *MIRROR
      description:
        - player.param23 == 0:
            
      commands:
        - BREAK,SHATTER,SMASH:
            {
              if player.closed == 0 then
              {
                println IT IS TOO FAR UP FOR YOU TO REACH.
              }
              else
              {
                println YOU STRIKE THE MIRROR A RESOUNDING BLOW, WHEREUPON IT SHATTERS INTO A
                println MYRIAD TINY FRAGMENTS.
                global room.die
              }
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - PLANT:
      longName: *PLANT
      description:
        - player.param24 == 0:
            THERE IS A TINY LITTLE PLANT IN THE PIT, MURMURING "WATER, WATER, ..."
        - player.param24 == 1:
            THE PLANT SPURTS INTO FURIOUS GROWTH FOR A FEW SECONDS.
        - player.param24 == 2:
            THERE IS A 12-FOOT-TALL BEANSTALK STRETCHING UP OUT OF THE PIT,
            BELLOWING "WATER!! WATER!!"
        - player.param24 == 3:
            THE PLANT GROWS EXPLOSIVELY, ALMOST FILLING THE BOTTOM OF THE PIT.
        - player.param24 == 4:
            THERE IS A GIGANTIC BEANSTALK STRETCHING ALL THE WAY UP TO THE HOLE.
        - player.param24 == 5:
            YOU'VE OVER-WATERED THE PLANT!
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if player.param24 <= 0 then
              {
                println THE PLANT HAS EXCEPTIONALLY DEEP ROOTS AND CANNOT BE PULLED FREE.
              }
              else
              {
                println DON'T BE RIDICULOUS!
              }
            }
  - PLANT2:
      longName: *PHONY PLANT (SEEN IN TWOPIT ROOM ONLY WHEN TALL ENOUGH)
      description:
        - player.param25 == 0:
            
        - player.param25 == 1:
            THE TOP OF A 12-FOOT-TALL BEANSTALK IS POKING OUT OF THE WEST PIT.
        - player.param25 == 2:
            THERE IS A HUGE BEANSTALK GROWING OUT OF THE WEST PIT UP TO THE HOLE.
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if player.param24 <= 0 then
              {
                println HUH...
              }
              else
              {
                println DON'T BE RIDICULOUS!
              }
            }
  - STALACTITE:
      longName: *STALACTITE
      description:
        - player.param26 == 0:
            
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - SHADOW:
      longName: *SHADOWY FIGURE
      description:
        - player.param27 == 0:
            THE SHADOWY FIGURE SEEMS TO BE TRYING TO ATTRACT YOUR ATTENTION.
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - AXE:
      longName: DWARF'S AXE
      description:
        - player.param28 == 0:
            THERE IS A LITTLE AXE HERE.
        - player.param28 == 1:
            THERE IS A LITTLE AXE LYING BESIDE THE BEAR.
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if player.param28 == 0 then
              {
                global item.TAKE
              }
              else
              {
                println DON'T BE RIDICULOUS!
              }
            }
  - DRAWING:
      longName: *CAVE DRAWINGS
      description:
        - player.param29 == 0:
            
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - PIRATE:
      longName: *PIRATE
      description:
        - player.param30 == 0:
            
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - DRAGON:
      longName: *DRAGON
      description:
        - player.param31 == 0:
            A HUGE GREEN FIERCE DRAGON BARS THE WAY!
        - player.param31 == 1:
            CONGRATULATIONS!  YOU HAVE JUST VANQUISHED A DRAGON WITH YOUR BARE
            HANDS!
        - player.param31 == 2:
            THE BODY OF A HUGE GREEN DEAD DRAGON IS LYING OFF TO ONE SIDE.
      commands:
        - FEED:
            {
              if player.param31 != 0 then
              {
                println THERE'S NOTHING HERE IT WANTS TO EAT (EXCEPT PERHAPS YOU).
              }
              else
              {
                println DON'T BE RIDICULOUS!
              }
            }
        - EAT,DEVOUR:
            {
              println I THINK I JUST LOST MY APPETITE.
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - CHASM:
      longName: *CHASM
      description:
        - player.param32 == 0:
            A RICKETY WOODEN BRIDGE EXTENDS ACROSS THE CHASM, VANISHING INTO THE
            MIST.  A SIGN POSTED ON THE BRIDGE READS, "STOP! PAY TROLL!"
        - player.param32 == 1:
            THE WRECKAGE OF A BRIDGE (AND A DEAD BEAR) CAN BE SEEN AT THE BOTTOM
            OF THE CHASM.
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - TROLL:
      longName: *TROLL
      description:
        - player.param33 == 0:
            A BURLY TROLL STANDS BY THE BRIDGE AND INSISTS YOU THROW HIM A
            TREASURE BEFORE YOU MAY CROSS.
        - player.param33 == 1:
            THE TROLL STEPS OUT FROM BENEATH THE BRIDGE AND BLOCKS YOUR WAY.
        - player.param33 == 2:
            
      commands:
        - FEED:
            {
              println GLUTTONY IS NOT ONE OF THE TROLL'S VICES.  AVARICE, HOWEVER, IS.
            }
        - EAT,DEVOUR:
            {
              println I THINK I JUST LOST MY APPETITE.
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - TROLL2:
      longName: *PHONY TROLL
      description:
        - player.param34 == 0:
            THE TROLL IS NOWHERE TO BE SEEN.
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println THE TROLL IS NOWHERE TO BE SEEN.
            }
  - BEAR:
      longName: 
      description:
        - player.param35 == 0:
            THERE IS A FEROCIOUS CAVE BEAR EYING YOU FROM THE FAR END OF THE ROOM!
        - player.param35 == 1:
            THERE IS A GENTLE CAVE BEAR SITTING PLACIDLY IN ONE CORNER.
        - player.param35 == 2:
            THERE IS A CONTENTED-LOOKING BEAR WANDERING ABOUT NEARBY.
        - player.param35 == 3:
            
      commands:
        - FEED:
            {
              if present FOOD then
              {
                remove FOOD
                player.param35 = 1
                player.param28 = 0
                println THE BEAR EAGERLY WOLFS DOWN YOUR FOOD, AFTER WHICH HE SEEMS TO CALM
                println DOWN CONSIDERABLY AND EVEN BECOMES RATHER FRIENDLY.
              }
              else
              {
                if player.param35 == 0 then
                {
                  println THERE'S NOTHING HERE IT WANTS TO EAT (EXCEPT PERHAPS YOU).
                }
                else
                {
                  println DON'T BE RIDICULOUS!
                }
              }
            }
        - EAT,DEVOUR:
            {
              println I THINK I JUST LOST MY APPETITE.
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if has then
              {
                println YOU ARE ALREADY CARRYING IT!
              }
              else
              {
                if player.param35 == 1 then
                {
                  println THE BEAR IS STILL CHAINED TO THE WALL.
                }
                else if player.param35 == 2 then
                {
                  if invcount < 7 then
			            {
		                take
		                println OK
			            }
			            else
			            {
			              println YOU CAN'T CARRY ANYTHING MORE.	YOU'LL HAVE TO DROP SOMETHING FIRST.
			            }
                }
                else
                {
                  println DON'T BE RIDICULOUS!
                }               
              }
            }
        - DROP,RELEASE,FREE,DISCARD,DUMP,THROW,TOSS:
            {
              if has then
              {
                if present TROLL then
                {
                  remove TROLL from room116
                  put TROLL2 in room122
                  remove TROLL from room116
                  put TROLL2 in room122
                  player.param33 = 2
                  println THE BEAR LUMBERS TOWARD THE TROLL, WHO LETS OUT A STARTLED SHRIEK AND
                  println SCURRIES AWAY.	THE BEAR SOON GIVES UP THE PURSUIT AND WANDERS BACK.
                }
                else
                {
                  drop
                  println OK
                }
              }  
              else
              {
                println YOU CAN'T THROW AN ITEM YOU DON'T POSSESS!
              }
            }
  - MESSAGE:
      longName: *MESSAGE IN SECOND MAZE
      description:
        - player.param36 == 0:
            THERE IS A MESSAGE SCRAWLED IN THE DUST IN A FLOWERY SCRIPT, READING:
            "THIS IS NOT THE MAZE WHERE THE PIRATE LEAVES HIS TREASURE CHEST."
      commands:
        - READ:
            {
              println "THIS IS NOT THE MAZE WHERE THE PIRATE LEAVES HIS TREASURE CHEST."
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - VOLCANO:
      longName: *VOLCANO AND/OR GEYSER
      description:
        - player.param37 == 0:
            
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - MACHINE:
      longName: *VENDING MACHINE
      description:
        - player.param38 == 0:
            THERE IS A MASSIVE VENDING MACHINE HERE.  THE INSTRUCTIONS ON IT READ:
            "DROP COINS HERE TO RECEIVE FRESH BATTERIES."
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - BATTERIES:
      longName: BATTERIES
      description:
        - player.param39 == 0:
            THERE ARE FRESH BATTERIES HERE.
        - player.param39 == 1:
            SOME WORN-OUT BATTERIES HAVE BEEN DISCARDED NEARBY.
      commands:
  - CARPET:
      longName: *CARPET AND/OR MOSS
      description:
        - player.param40 == 0:
            
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              println DON'T BE RIDICULOUS!
            }
  - GOLD:
      longName: LARGE GOLD NUGGET
      description:
        - player.param50 == 0:
            THERE IS A LARGE SPARKLING NUGGET OF GOLD HERE!
      commands:
  - DIAMOND:
      longName: SEVERAL DIAMONDS
      description:
        - player.param51 == 0:
            THERE ARE DIAMONDS HERE!
      commands:
  - SILVER:
      longName: BARS OF SILVER
      description:
        - player.param52 == 0:
            THERE ARE BARS OF SILVER HERE!
      commands:
  - JEWELRY:
      longName: PRECIOUS JEWELRY
      description:
        - player.param53 == 0:
            THERE IS PRECIOUS JEWELRY HERE!
      commands:
  - COINS:
      longName: RARE COINS
      description:
        - player.param54 == 0:
            THERE ARE MANY COINS HERE!
      commands:
        - DROP,RELEASE,DUMP,THROW,TOSS:
            {
              if has then
              {
                if present MACHINE then
                {
                  discard
                  put BATTERIES
                  println THERE ARE FRESH BATTERIES HERE.
                }
                else
                {
                  drop
                  println OK
                }
              }
              else
              {
                println YOU CAN'T THROW AN ITEM YOU DON'T POSSESS!
              }
            }
  - CHEST:
      longName: TREASURE CHEST
      description:
        - player.param55 == 0:
            THE PIRATE'S TREASURE CHEST IS HERE!
      commands:
  - EGGS:
      longName: GOLDEN EGGS
      description:
        - player.param56 == 0:
            THERE IS A LARGE NEST HERE, FULL OF GOLDEN EGGS!
        - player.param56 == 1:
            THE NEST OF GOLDEN EGGS HAS VANISHED!
        - player.param56 == 2:
            DONE!
      commands:
  - TRIDENT:
      longName: JEWELED TRIDENT
      description:
        - player.param57 == 0:
            THERE IS A JEWEL-ENCRUSTED TRIDENT HERE!
      commands:
  - VASE:
      longName: MING VASE
      description:
        - player.param58 == 0:
            THERE IS A DELICATE, PRECIOUS, MING VASE HERE!
        - player.param58 == 1:
            THE VASE IS NOW RESTING, DELICATELY, ON A VELVET PILLOW.
        - player.param58 == 2:
            THE FLOOR IS LITTERED WITH WORTHLESS SHARDS OF POTTERY.
        - player.param58 == 3:
            THE MING VASE DROPS WITH A DELICATE CRASH.
      commands:
        - FILL:
            {
              if has then
              {
                if present WATER || present OIL then
                {
                  println THE SUDDEN CHANGE IN TEMPERATURE HAS DELICATELY SHATTERED THE VASE.
                  drop
                  player.param58 = 2
                }
                else
                {
                  println THERE IS NOTHING HERE WITH WHICH TO FILL THE VASE.
                }
              }
              else
              {
                println YOU AREN'T CARRYING IT!
              }
            }
        - DROP,RELEASE,FREE,DISCARD,DUMP,THROW,TOSS:
            {
              if has then
              {
                drop
                if present PILLOW then
                {
                  println THE VASE IS NOW RESTING, DELICATELY, ON A VELVET PILLOW.
                }
                else
                {
                  println THE MING VASE DROPS WITH A DELICATE CRASH.
                  player.param58 = 2
                }
              }
              else
              {
                println YOU CAN'T THROW AN ITEM YOU DON'T POSSESS!
              }
            }
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if player.param58 == 2 then
              {
                println DON'T BE RIDICULOUS!
              }
              else
              {
                global item.TAKE
              }
            }
  - EMERALD:
      longName: EGG-SIZED EMERALD
      description:
        - player.param59 == 0:
            THERE IS AN EMERALD HERE THE SIZE OF A PLOVER'S EGG!
      commands:
  - PLATINUM:
      longName: PLATINUM PYRAMID
      description:
        - player.param60 == 0:
            THERE IS A PLATINUM PYRAMID HERE, 8 INCHES ON A SIDE!
      commands:
  - PEARL:
      longName: GLISTENING PEARL
      description:
        - player.param61 == 0:
            OFF TO ONE SIDE LIES A GLISTENING PEARL!
      commands:
  - RUG:
      longName: PERSIAN RUG
      description:
        - player.param62 == 0:
            THERE IS A PERSIAN RUG SPREAD OUT ON THE FLOOR!
        - player.param62 == 1:
            THE DRAGON IS SPRAWLED OUT ON A PERSIAN RUG!!
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if player.param62 == 1 then
              {
                println DON'T BE RIDICULOUS!
              }
              else
              {
                if has then
                {
                  println YOU ARE ALREADY CARRYING IT!
                }
                else
                {
                  remove RUG from room119
                  remove RUG from room121
                  give RUG
                }
              }
            }
  - SPICE:
      longName: RARE SPICES
      description:
        - player.param63 == 0:
            THERE ARE RARE SPICES HERE!
      commands:
  - CHAIN:
      longName: GOLDEN CHAIN
      description:
        - player.param64 == 0:
            THERE IS A GOLDEN CHAIN LYING IN A HEAP ON THE FLOOR!
        - player.param64 == 1:
            THE BEAR IS LOCKED TO THE WALL WITH A GOLDEN CHAIN!
        - player.param64 == 2:
            THERE IS A GOLDEN CHAIN LOCKED TO THE WALL!
      commands:
        - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
            {
              if player.param64 != 0 then
              {
                println THE CHAIN IS STILL LOCKED.
              }
              else
              {
                global item.TAKE
              }
            }
        - UNLOCK,OPEN:
            {
              if player.param64 == 0 then
              {
                println THE CHAIN IS ALREADY UNLOCKED.
              }
              else
              {
                if player.param35 == 0 then
                {
                  println THERE IS NO WAY TO GET PAST THE BEAR TO UNLOCK THE CHAIN, WHICH IS
                  println PROBABLY JUST AS WELL.
                }
                else
                {
                  println THE CHAIN IS NOW UNLOCKED.
                  if player.param35 != 3 then
                  {
                    player.param35 = 2
                  }
                  player.param64 = 2
                }
              }
            }
        - LOCK,CLOSE:
            {
              if player.param64 != 0 then
              {
                println THE CHAIN IS ALREADY LOCKED.
              }
              else
              {
                println THE CHAIN IS NOW LOCKED.
                if has CHAIN then
                {
                  drop CHAIN
                }
                player.param64 = 2
              }
            }
global:
  onEntry:
    {
      player.wasdark = player.dark
      call setdark
      if player.dark == 1 then
      {
        if player.wasdark == 1 && rnd % 100 < 35 then
        {
          println YOU FELL INTO A PIT AND BROKE EVERY BONE IN YOUR BODY!
          global room.die
        }
        else
        {
          # nie pokazuj przedmiotów
          println IT IS NOW PITCH DARK.  IF YOU PROCEED YOU WILL LIKELY FALL INTO A PIT.
        }
      }
      if has BEAR then
      {
        println YOU ARE BEING FOLLOWED BY A VERY LARGE, TAME BEAR.
      }
      player.turns += 1
    }
  room:
    - *die20:
        {
          dropall
          move LAMP to room1
          player.param2 = 0
          goto room20
        }
    - *die21:
        {
          dropall
          move LAMP to room1
          player.param2 = 0
          goto room21
        }
    - *die:
        {
          dropall
          move LAMP to room1
          player.param2 = 0
          goto death
        }
    - *setscore:
        {
          player.score = 2
          if player.dflag > 0 then
          {
            player.score += 25
          }
          player.score += player.find50 * 2
          player.score += player.find51 * 2
          player.score += player.find52 * 2
          player.score += player.find53 * 2
          player.score += player.find54 * 2
          player.score += player.find55 * 2
          player.score += player.find56 * 2
          player.score += player.find57 * 2
          player.score += player.find58 * 2
          player.score += player.find59 * 2
          player.score += player.find60 * 2
          player.score += player.find61 * 2
          player.score += player.find62 * 2
          player.score += player.find63 * 2
          player.score += player.find64 * 2
          if present GOLD in room3 && player.param50 == 0 then
          {
            player.score += 10
          }
          if present DIAMOND in room3 && player.param51 == 0 then
          {
            player.score += 10
          }
          if present SILVER in room3 && player.param52 == 0 then
          {
            player.score += 10
          }
          if present JEWELRY in room3 && player.param53 == 0 then
          {
            player.score += 10
          }
          if present COINS in room3 && player.param54 == 0 then
          {
            player.score += 10
          }
          if present CHEST in room3 && player.param55 == 0 then
          {
            player.score += 12
          }
          if present EGGS in room3 && player.param56 == 0 then
          {
            player.score += 14
          }
          if present TRIDENT in room3 && player.param57 == 0 then
          {
            player.score += 14
          }
          if present VASE in room3 && player.param58 == 0 then
          {
            player.score += 14
          }
          if present EMERALD in room3 && player.param59 == 0 then
          {
            player.score += 14
          }
          if present PLATINUM in room3 && player.param60 == 0 then
          {
            player.score += 14
          }
          if present PEARL in room3 && player.param61 == 0 then
          {
            player.score += 14
          }
          if present RUG in room3 && player.param62 == 0 then
          {
            player.score += 14
          }
          if present SPICE in room3 && player.param63 == 0 then
          {
            player.score += 14
          }
          if present CHAIN in room3 && player.param64 == 0 then
          {
            player.score += 14
          }
          player.score += (player.maxdie - player.numdie) * 10
          player.score += player.notquit * 4
          if player.closing == 1 then
          {
            player.score += 25
          }
          if player.closed == 1 then
          {
            player.score += player.endbonus
          }
          if present MAGAZINE in room108 then
          {
            player.score += 1
          }
        }
    - *setdark:
        {
          if present LAMP && player.param2 == 1 then
          {
            player.dark = 0
          }
          else
          {
            player.dark = 1
          }
        }
    - LOOK:
        {
          look
        }
    - HELP:
        {
          println I KNOW OF PLACES, ACTIONS, AND THINGS.	MOST OF MY VOCABULARY
          println DESCRIBES PLACES AND IS USED TO MOVE YOU THERE.  TO MOVE, TRY WORDS
          println LIKE FOREST, BUILDING, DOWNSTREAM, ENTER, EAST, WEST, NORTH, SOUTH,
          println UP, OR DOWN.  I KNOW ABOUT A FEW SPECIAL OBJECTS, LIKE A BLACK ROD
          println HIDDEN IN THE CAVE.  THESE OBJECTS CAN BE MANIPULATED USING SOME OF
          println THE ACTION WORDS THAT I KNOW.  USUALLY YOU WILL NEED TO GIVE BOTH THE
          println OBJECT AND ACTION WORDS (IN EITHER ORDER), BUT SOMETIMES I CAN INFER
          println THE OBJECT FROM THE VERB ALONE. THE OBJECTS HAVE SIDE
          println EFFECTS; FOR INSTANCE, THE ROD SCARES THE BIRD.  USUALLY PEOPLE HAVING
          println TROUBLE MOVING JUST NEED TO TRY A FEW MORE WORDS.  USUALLY PEOPLE
          println TRYING UNSUCCESSFULLY TO MANIPULATE AN OBJECT ARE ATTEMPTING SOMETHING
          println BEYOND THEIR (OR MY!) CAPABILITIES AND SHOULD TRY A COMPLETELY
          println DIFFERENT TACK.  TO SPEED THE GAME YOU CAN SOMETIMES MOVE LONG
          println DISTANCES WITH A SINGLE WORD.  FOR EXAMPLE, "BUILDING" USUALLY GETS
          println YOU TO THE BUILDING FROM ANYWHERE ABOVE GROUND EXCEPT WHEN LOST IN THE
          println FOREST.  ALSO, NOTE THAT CAVE PASSAGES TURN A LOT, AND THAT LEAVING A
          println ROOM TO THE NORTH DOES NOT GUARANTEE ENTERING THE NEXT FROM THE SOUTH.
          println GOOD LUCK!
        }
    - INFO:
        {
          println IF YOU WANT TO END YOUR ADVENTURE EARLY, SAY "QUIT".  TO SUSPEND YOUR
          println ADVENTURE SUCH THAT YOU CAN CONTINUE LATER, SAY "SUSPEND" (OR "PAUSE"
          println OR "SAVE").  TO SEE WHAT HOURS THE CAVE IS NORMALLY OPEN, SAY "HOURS".
          println TO SEE HOW WELL YOU'RE DOING, SAY "SCORE".  TO GET FULL CREDIT FOR A
          println TREASURE, YOU MUST HAVE LEFT IT SAFELY IN THE BUILDING, THOUGH YOU GET
          println PARTIAL CREDIT JUST FOR LOCATING IT.  YOU LOSE POINTS FOR GETTING
          println KILLED, OR FOR QUITTING, THOUGH THE FORMER COSTS YOU MORE.  THERE ARE
          println ALSO POINTS BASED ON HOW MUCH (IF ANY) OF THE CAVE YOU'VE MANAGED TO
          println EXPLORE; IN PARTICULAR, THERE IS A LARGE BONUS JUST FOR GETTING IN (TO
          println DISTINGUISH THE BEGINNERS FROM THE REST OF THE PACK), AND THERE ARE
          println OTHER WAYS TO DETERMINE WHETHER YOU'VE BEEN THROUGH SOME OF THE MORE
          println HARROWING SECTIONS.  IF YOU THINK YOU'VE FOUND ALL THE TREASURES, JUST
          println KEEP EXPLORING FOR A WHILE.  IF NOTHING INTERESTING HAPPENS, YOU
          println HAVEN'T FOUND THEM ALL YET.  IF SOMETHING INTERESTING *DOES* HAPPEN,
          println IT MEANS YOU'RE GETTING A BONUS AND HAVE AN OPPORTUNITY TO GARNER MANY
          println MORE POINTS IN THE MASTER'S SECTION.  I MAY OCCASIONALLY OFFER HINTS
          println IF YOU SEEM TO BE HAVING TROUBLE.  IF I DO, I'LL WARN YOU IN ADVANCE
          println HOW MUCH IT WILL AFFECT YOUR SCORE TO ACCEPT THE HINTS. 
        }
    - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
        {
          println WHAT?
        }
    - DROP,RELEASE,FREE,DISCARD,DUMP:
        {
          println WHAT?
        }
    - SAY,CHANT,SING,UTTER,MUMBLE:
        {
          println SAY WHAT?
        }
    - UNLOCK,OPEN:
        {
          println WHAT?
        }
    - NOTHING:
        {
          print.
        }
    - LOCK,CLOSE:
        {
          println WHAT?
        }
    - LIGHT,ON:
        {
          if has LAMP then
          {
            player.param2 = 1
            println OK
          }
          else
          {
            println YOU HAVE NO SOURCE OF LIGHT.
          }
        }
    - EXTINGUISH,OFF:
        {
          if has LAMP then
          {
            player.param2 = 0
            println OK
          }
          else
          {
            println YOU HAVE NO SOURCE OF LIGHT.
          }
        }
    - WAVE,SHAKE,SWING:
        {
          if has ROD && present FISSURE then
          {
            player.param12 = 1 - player.param12
            if player.param12 == 1 then
            {
              println A CRYSTAL BRIDGE NOW SPANS THE FISSURE.
            }
            else
            {
              println THE CRYSTAL BRIDGE HAS VANISHED!
            }
          }
          else
          {
            println NOTHING HAPPENS.
          }
        }
    - CALM,PLACATE,TAME:
        {
          println I'M GAME.  WOULD YOU CARE TO EXPLAIN HOW?
        }
    - WALK,RUN,TRAVEL,GO,PROCEED,CONTINUE,EXPLORE,GOTO,FOLLOW,TURN:
        {
          println WHERE?
          # może tu też dodać jakiś drugi argument (jak do SAY)
        }
    - ATTACK,KILL,FIGHT,HIT,STRIKE,FEED:
        {
          println WHAT?
        }
    - EAT,DEVOUR:
        {
          if present FOOD then
          {
            remove FOOD
            println THANK YOU, IT WAS DELICIOUS!
          }
          else
          {
            println WHAT?
          }
        }
    - DRINK:
        {
          if present WATER then
          {
            println YOU HAVE TAKEN A DRINK FROM THE STREAM.  THE WATER TASTES STRONGLY OF
            println MINERALS, BUT IS NOT UNPLEASANT.  IT IS EXTREMELY COLD.
          }
          else
          {
            if present BOTTLE && player.param20 == 0 then
            {
              player.param20 = 1
              println THE BOTTLE OF WATER IS NOW EMPTY.
            }
            else
            {
              println WHAT?
            }
          }
        }
    - RUB:
        {
          println WHAT?
        }
    - THROW,TOSS:
        {
          println WHAT?
        }
    - CALM,PLACATE,TAME:
        {
          println I'M GAME.  WOULD YOU CARE TO EXPLAIN HOW?
        }
    - QUIT:
        {
          print DO YOU REALLY WANT TO QUIT NOW? 
          if askYesNo then
          {
            player.notquit = 0
            player.numdie = player.maxdie
            goto summary
          }
        }
    - FIND,WHERE:
        {
          println WHAT?
        }
    - INVENTORY:
        {
          println YOU ARE CURRENTLY HOLDING THE FOLLOWING:
          showInventory
        }
    - BLAST,DETONATE,IGNITE,BLOWUP:
        {
          if player.param6 >= 0 && player.closed == 1 then
          {
            if present ROD2 then
            {
              println THERE IS A LOUD EXPLOSION, AND YOU ARE SUDDENLY SPLASHED ACROSS THE
              println WALLS OF THE ROOM.
              player.endbonus = 25
            }
            else if in room115 then
            {
              println THERE IS A LOUD EXPLOSION, AND A TWENTY-FOOT HOLE APPEARS IN THE FAR
              println WALL, BURYING THE SNAKES IN THE RUBBLE.  A RIVER OF MOLTEN LAVA POURS
              println IN THROUGH THE HOLE, DESTROYING EVERYTHING IN ITS PATH, INCLUDING YOU!
              player.endbonus = 30
            }
            else
            {
              println THERE IS A LOUD EXPLOSION, AND A TWENTY-FOOT HOLE APPEARS IN THE FAR
              println WALL, BURYING THE DWARVES IN THE RUBBLE.  YOU MARCH THROUGH THE HOLE
              println AND FIND YOURSELF IN THE MAIN OFFICE, WHERE A CHEERING BAND OF
              println FRIENDLY ELVES CARRY THE CONQUERING ADVENTURER OFF INTO THE SUNSET.
              player.endbonus = 45
            }
            goto summary
          }
        }
    - SCORE:
        {
          global room.setscore
          print IF YOU WERE TO QUIT NOW, YOU WOULD SCORE 
          printval player.score - 4 - 10*(player.maxdie - player.numdie)
          println  OUT OF A POSSIBLE 350.
        }
    - FEE:
        {
          if player.foobar == 0 then
          {
            println OK
            player.foobarcmdcnt = cmdcount
            player.foobar = 1
          }
          else
          {
            println WHAT'S THE MATTER, CAN'T YOU READ?  NOW YOU'D BEST START OVER.
            player.foobar = 0
          }
        }
    - FIE:
        {
          if player.foobar == 0 || player.foobarcmdcnt + 1 != cmdcount then
          {
            println NOTHING HAPPENS.
            player.foobar = 0
          }
          else if player.foobar == 1 then
          {
            println OK
            player.foobarcmdcnt = cmdcount
            player.foobar = 2
          }
          else
          {
            println WHAT'S THE MATTER, CAN'T YOU READ?  NOW YOU'D BEST START OVER.
            player.foobar = 0
          }
        }
    - FOE:
        {
          if player.foobar == 0 || player.foobarcmdcnt + 1 != cmdcount then
          {
            println NOTHING HAPPENS.
            player.foobar = 0
          }
          else if player.foobar == 2 then
          {
            println OK
            player.foobarcmdcnt = cmdcount
            player.foobar = 3
          }
          else
          {
            println WHAT'S THE MATTER, CAN'T YOU READ?  NOW YOU'D BEST START OVER.
            player.foobar = 0
          }
        }
    - FOO:
        {
          if player.foobar == 0 || player.foobarcmdcnt + 1 != cmdcount then
          {
            println NOTHING HAPPENS.
            player.foobar = 0
          }
          else if player.foobar == 3 then
          {
            player.foobarcmdcnt = cmdcount
            player.foobar = 0
            if present EGGS in room92 || (has EGGS && in room92) then
            {
              println NOTHING HAPPENS.
            }
            else
            {
              if has EGGS && !present TROLL in room117 && player.param33 == 0 then
              {
                player.param33 = 1
              }
              if in room92 then
              {
                put EGGS
                # tak naprawde trzeba jeszcze usunac jajka z poprzedniej lokalizacji
                println THERE IS A LARGE NEST HERE, FULL OF GOLDEN EGGS!
              }
              else if present EGGS then
              {
                move EGGS to room92
                println THE NEST OF GOLDEN EGGS HAS VANISHED!
              }
              else
              {
                put EGGS in room92
                # tak naprawde trzeba jeszcze usunac jajka z poprzedniej lokalizacji
                println DONE!
              }
            }
          }
          else
          {
            println WHAT'S THE MATTER, CAN'T YOU READ?  NOW YOU'D BEST START OVER.
            player.foobar = 0
          }
        }
    - FUM:
        {
          println I DON'T KNOW HOW.
        }
    - READ,PERUSE:
        {
          println WHAT?
        }
    - BREAK,SHATTER,SMASH:
        {
          println WHAT?
        }
    - WAKE,DISTURB:
        {
          println WHO?
        }
    - SAVE:
        {
          print ENTER FILE NAME: 
          save
          println OK
        }
    - RESTORE:
        {
          print ENTER FILE NAME: 
          restore
          println OK
        }
    - POUR:
        {
          println WHAT?
        }
  item:
    - CARRY,TAKE,KEEP,CATCH,STEAL,CAPTURE,GET,TOTE:
        {
          if has then
          {
            println YOU ARE ALREADY CARRYING IT!
          }
          else
		      {
		        if invcount < 7 then
			      {
		          take
		          println OK
			      }
			      else
			      {
			        println YOU CAN'T CARRY ANYTHING MORE.	YOU'LL HAVE TO DROP SOMETHING FIRST.
			      }
		      }
        }
    - DROP,RELEASE,FREE,DISCARD,DUMP,THROW,TOSS:
        {
          if has then
          {
            drop
            println OK
          }
          else
          {
            println YOU CAN'T THROW AN ITEM YOU DON'T POSSESS!
          }
        }
    - EAT,DEVOUR,DRINK:
        {
          println DON'T BE RIDICULOUS!
        }
    - RUB:
        {
          println PECULIAR.  NOTHING UNEXPECTED HAPPENS.
        }
    - UNLOCK,OPEN,LOCK,CLOSE:
        {
          println I DON'T KNOW HOW TO LOCK OR UNLOCK IT.
        }
    - ATTACK,KILL,FIGHT,HIT,STRIKE,FEED:
        {
          println DON'T BE RIDICULOUS!
        }
    - LIGHT,ON,EXTINGUISH,OFF:
        {
          println YOU HAVE NO SOURCE OF LIGHT.
        }
    - FIND,WHERE,INVENTORY:
        {
          if has then
          {
            println YOU ARE ALREADY CARRYING IT!
          }
          else
          {
            if present then
            {
              if player.closed == 1 then
              {
                println I DARESAY WHATEVER YOU WANT IS AROUND HERE SOMEWHERE.
              }
              else
              {
                println I BELIEVE WHAT YOU WANT IS RIGHT HERE WITH YOU.
              }
            }
          }
        }
    - BLAST,DETONATE,IGNITE,BLOWUP:
        {
          global room.BLAST
        }
    - FILL:
        {
          println YOU CAN'T FILL THAT.
        }
    - POUR:
        {
          println YOU CAN'T POUR THAT.
        }
    - FEED:
        {
          println I'M GAME.  WOULD YOU CARE TO EXPLAIN HOW?
        }
    - BREAK,SHATTER,SMASH:
        {
          println IT'S BEYOND YOUR POWER TO DO THAT.
        }
rooms:
  - welcome:
      description:
      onEntry:
        {
          print WELCOME TO ADVENTURE!!	WOULD YOU LIKE INSTRUCTIONS? 
          if askYesNo then
          {
            println SOMEWHERE NEARBY IS COLOSSAL CAVE, WHERE OTHERS HAVE FOUND FORTUNES IN
            println TREASURE AND GOLD, THOUGH IT IS RUMORED THAT SOME WHO ENTER ARE NEVER
            println SEEN AGAIN.  MAGIC IS SAID TO WORK IN THE CAVE.  I WILL BE YOUR EYES
            println AND HANDS.  DIRECT ME WITH COMMANDS OF 1 OR 2 WORDS.  I SHOULD WARN
            println YOU THAT I LOOK AT ONLY THE FIRST FIVE LETTERS OF EACH WORD, SO YOU'LL
            println HAVE TO ENTER "NORTHEAST" AS "NE" TO DISTINGUISH IT FROM "NORTH".
            println (SHOULD YOU GET STUCK, TYPE "HELP" FOR SOME GENERAL HINTS.  FOR INFOR-
            println MATION ON HOW TO END YOUR ADVENTURE, ETC., TYPE "INFO".)
            println 			      - - -
            println THIS PROGRAM WAS ORIGINALLY DEVELOPED BY WILLIE CROWTHER.  MOST OF THE
            println FEATURES OF THE CURRENT PROGRAM WERE ADDED BY DON WOODS (DON @ SU-AI).
            println CONTACT DON IF YOU HAVE ANY QUESTIONS, COMMENTS, ETC.
            player.lamplimit = 1000
          }
          else
          {
            player.lamplimit = 330
          }
          print.
          goto room1
        }
      items:
      entities:
      commands:
  - room1:
      description:
        - true:
            YOU ARE STANDING AT THE END OF A ROAD BEFORE A SMALL BRICK BUILDING.
            AROUND YOU IS A FOREST.  A SMALL STREAM FLOWS OUT OF THE BUILDING AND
            DOWN A GULLY.
      items:
        - WATER
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - ROAD,HILL,WEST,W,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room2
            }
        - ENTER,BUILDING,HOUSE,INWARD,INWARDS,INSIDE,IN,EAST,E:
            {
              goto room3
            }
        - DOWNSTREAM,GULLY,STREAM,SOUTH,S,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room4
            }
        - FOREST,NORTH,N:
            {
              goto room5
            }
        - DEPRESSION:
            {
              goto room8
            }
  - room2:
      description:
        - true:
            YOU HAVE WALKED UP A HILL, STILL IN THE FOREST.  THE ROAD SLOPES BACK
            DOWN THE OTHER SIDE OF THE HILL.  THERE IS A BUILDING IN THE DISTANCE.
      items:
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - ROAD,HILL,BUILDING,HOUSE,FORWARD,CONTINUE,ONWARD,ONWARDS,EAST,E,NORTH,N,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room1
            }
        - FOREST,SOUTH,S:
            {
              goto room5
            }
  - room3:
      description:
        - true:
            YOU ARE INSIDE A BUILDING, A WELL HOUSE FOR A LARGE SPRING.
      items:
        - KEYS
        - LAMP
        - FOOD
        - BOTTLE
        - WATER
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - ENTER,OUT,OUTSIDE,EXIT,LEAVE,OUTDOORS,WEST,W:
            {
              goto room1
            }
        - XYZZY:
            {
              goto room11
            }
        - PLUGH:
            {
              if player.dflag < 1 then
              {
                player.dflag = 1
              }
              goto room33
            }
        - DOWNSTREAM,STREAM:
            {
              if player.dflag < 1 then
              {
                player.dflag = 1
              }
              goto room79
            }
  - room4:
      description:
        - true:
            YOU ARE IN A VALLEY IN THE FOREST BESIDE A STREAM TUMBLING ALONG A
            ROCKY BED.
      items:
        - WATER
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - UPSTREAM,BUILDING,HOUSE,NORTH,N:
            {
              goto room1
            }
        - FOREST,EAST,E,WEST,W,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room5
            }
        - DOWNSTREAM,SOUTH,S,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room7
            }
        - DEPRESSION:
            {
              goto room8
            }
  - room5:
      description:
        - true:
            YOU ARE IN OPEN FOREST, WITH A DEEP VALLEY TO ONE SIDE.
      items:
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - VALLEY,EAST,E,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room4
            }
        - FOREST,FORWARD,CONTINUE,ONWARD,ONWARDS,NORTH,N:
            {
              if rnd % 100 < 50 then
              {
              goto room5
              }
              else
              {
              call unnamed387
              }
            }
        - *unnamed387:
            {
              goto room6
            }
        - WEST,W,SOUTH,S:
            {
              goto room5
            }
  - room6:
      description:
        - true:
            YOU ARE IN OPEN FOREST NEAR BOTH A VALLEY AND A ROAD.
      items:
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - ROAD,HILL,NORTH,N:
            {
              goto room1
            }
        - VALLEY,EAST,E,WEST,W,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room4
            }
        - FOREST,SOUTH,S:
            {
              goto room5
            }
  - room7:
      description:
        - true:
            AT YOUR FEET ALL THE WATER OF THE STREAM SPLASHES INTO A 2-INCH SLIT
            IN THE ROCK.  DOWNSTREAM THE STREAMBED IS BARE ROCK.
      items:
        - WATER
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - BUILDING,HOUSE:
            {
              goto room1
            }
        - UPSTREAM,NORTH,N:
            {
              goto room4
            }
        - FOREST,EAST,E,WEST,W:
            {
              goto room5
            }
        - DOWNSTREAM,ROCK,BED,SOUTH,S:
            {
              goto room8
            }
        - SLIT,STREAM,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              println YOU DON'T FIT THROUGH A TWO-INCH SLIT!
            }
  - room8:
      description:
        - true:
            YOU ARE IN A 20-FOOT DEPRESSION FLOORED WITH BARE DIRT.  SET INTO THE
            DIRT IS A STRONG STEEL GRATE MOUNTED IN CONCRETE.  A DRY STREAMBED
            LEADS INTO THE DEPRESSION.
      items:
        - GRATE
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - FOREST,EAST,E,WEST,W,SOUTH,S:
            {
              goto room5
            }
        - BUILDING,HOUSE:
            {
              goto room1
            }
        - UPSTREAM,GULLY,NORTH,N:
            {
              goto room7
            }
        - ENTER,INWARD,INWARDS,INSIDE,IN,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              if player.param3 != 0 then
              {
              goto room9
              }
              else
              {
              call unnamed401
              }
            }
        - *unnamed401:
            {
              println YOU CAN'T GO THROUGH A LOCKED STEEL GRATE!
            }
  - room9:
      description:
        - true:
            YOU ARE IN A SMALL CHAMBER BENEATH A 3X3 STEEL GRATE TO THE SURFACE.
            A LOW CRAWL OVER COBBLES LEADS INWARD TO THE WEST.
      items:
        - GRATE
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - OUT,OUTSIDE,EXIT,LEAVE,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              if player.param3 != 0 then
              {
              goto room8
              }
              else
              {
              call unnamed403
              }
            }
        - *unnamed403:
            {
              println YOU CAN'T GO THROUGH A LOCKED STEEL GRATE!
            }
        - CRAWL,COBBLES,INWARD,INWARDS,INSIDE,IN,WEST,W:
            {
              goto room10
            }
        - PIT:
            {
              goto room14
            }
        - DEBRIS:
            {
              goto room11
            }
  - room10:
      description:
        - true:
            YOU ARE CRAWLING OVER COBBLES IN A LOW PASSAGE.  THERE IS A DIM LIGHT
            AT THE EAST END OF THE PASSAGE.
      items:
        - CAGE
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - OUT,OUTSIDE,EXIT,LEAVE,SURFACE,NULL,NOWHERE,EAST,E:
            {
              goto room9
            }
        - INWARD,INWARDS,INSIDE,IN,DARK,WEST,W,DEBRIS:
            {
              goto room11
            }
        - PIT:
            {
              goto room14
            }
  - room11:
      description:
        - true:
            YOU ARE IN A DEBRIS ROOM FILLED WITH STUFF WASHED IN FROM THE SURFACE.
            A LOW WIDE PASSAGE WITH COBBLES BECOMES PLUGGED WITH MUD AND DEBRIS
            HERE, BUT AN AWKWARD CANYON LEADS UPWARD AND WEST.  A NOTE ON THE WALL
            SAYS "MAGIC WORD XYZZY".
      items:
        - ROD
      entities:
      commands:
        - DEPRESSION:
            {
              if player.param3 != 0 then
              {
              goto room8
              }
              else
              {
              call ENTRANCE
              }
            }
        - ENTRANCE:
            {
              goto room9
            }
        - CRAWL,COBBLES,PASSAGE,TUNNEL,LOW,EAST,E:
            {
              goto room10
            }
        - CANYON,INWARD,INWARDS,INSIDE,IN,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,WEST,W:
            {
              goto room12
            }
        - XYZZY:
            {
              goto room3
            }
        - PIT:
            {
              goto room14
            }
  - room12:
      description:
        - true:
            YOU ARE IN AN AWKWARD SLOPING EAST/WEST CANYON.
      items:
      entities:
      commands:
        - DEPRESSION:
            {
              if player.param3 != 0 then
              {
              goto room8
              }
              else
              {
              call ENTRANCE
              }
            }
        - ENTRANCE:
            {
              goto room9
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,EAST,E,DEBRIS:
            {
              goto room11
            }
        - INWARD,INWARDS,INSIDE,IN,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,WEST,W:
            {
              goto room13
            }
        - PIT:
            {
              goto room14
            }
  - room13:
      description:
        - true:
            YOU ARE IN A SPLENDID CHAMBER THIRTY FEET HIGH.  THE WALLS ARE FROZEN
            RIVERS OF ORANGE STONE.  AN AWKWARD CANYON AND A GOOD PASSAGE EXIT
            FROM EAST AND WEST SIDES OF THE CHAMBER.
      items:
        - BIRD
      entities:
      commands:
        - DEPRESSION:
            {
              if player.param3 != 0 then
              {
              goto room8
              }
              else
              {
              call ENTRANCE
              }
            }
        - ENTRANCE:
            {
              goto room9
            }
        - DEBRIS:
            {
              goto room11
            }
        - CANYON,EAST,E:
            {
              goto room12
            }
        - PASSAGE,TUNNEL,PIT,WEST,W:
            {
              goto room14
            }
  - room14:
      description:
        - true:
            AT YOUR FEET IS A SMALL PIT BREATHING TRACES OF WHITE MIST.  AN EAST
            PASSAGE ENDS HERE EXCEPT FOR A SMALL CRACK LEADING ON.
      items:
        - STEPS
      entities:
      commands:
        - DEPRESSION:
            {
              if player.param3 != 0 then
              {
              goto room8
              }
              else
              {
              call ENTRANCE
              }
            }
        - ENTRANCE:
            {
              goto room9
            }
        - DEBRIS:
            {
              goto room11
            }
        - PASSAGE,TUNNEL,EAST,E:
            {
              goto room13
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,PIT,STEPS:
            {
              if has GOLD then
              {
              if player.dflag < 1 then
              {
                player.dflag = 1
              }
              global room.die20
              }
              else
              {
              call unnamed431
              }
            }
        - *unnamed431:
            {
              if player.dflag < 1 then
              {
                player.dflag = 1
              }
              goto room15
            }
        - CRACK,WEST,W:
            {
              if player.dflag < 1 then
              {
                player.dflag = 1
              }
              goto room16
            }
  - room15:
      description:
        - true:
            YOU ARE AT ONE END OF A VAST HALL STRETCHING FORWARD OUT OF SIGHT TO
            THE WEST.  THERE ARE OPENINGS TO EITHER SIDE.  NEARBY, A WIDE STONE
            STAIRCASE LEADS DOWNWARD.  THE HALL IS FILLED WITH WISPS OF WHITE MIST
            SWAYING TO AND FRO ALMOST AS IF ALIVE.
            STAIRCASE.  THERE IS A PASSAGE AT THE TOP OF A DOME BEHIND YOU.
      items:
        - STEPS
      entities:
      commands:
        - LEFT,SOUTH,S:
            {
              goto room18
            }
        - FORWARD,CONTINUE,ONWARD,ONWARDS,HALL,WEST,W:
            {
              goto room17
            }
        - STAIRS,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,NORTH,N:
            {
              goto room19
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,PIT,STEPS,DOME,PASSAGE,TUNNEL,EAST,E:
            {
              if has GOLD then
              {
              goto room22
              }
              else
              {
              call unnamed437
              }
            }
        - *unnamed437:
            {
              goto room14
            }
        - Y2:
            {
              goto room34
            }
  - room16:
      description:
        - true:
            THE CRACK IS FAR TOO SMALL FOR YOU TO FOLLOW.
      onEntry:
        {
          goto room14
        }
      items:
      entities:
      commands:
  - room17:
      description:
        - true:
            YOU ARE ON THE EAST BANK OF A FISSURE SLICING CLEAR ACROSS THE HALL.
            THE MIST IS QUITE THICK HERE, AND THE FISSURE IS TOO WIDE TO JUMP.
      items:
        - FISSURE
      entities:
      commands:
        - HALL,EAST,E:
            {
              goto room15
            }
        - JUMP:
            {
              if player.param12 != 0 then
              {
              println I RESPECTFULLY SUGGEST YOU GO ACROSS THE BRIDGE INSTEAD OF JUMPING.
              }
              else
              {
              call FORWARD,CONTINUE,ONWARD,ONWARDS
              }
            }
        - FORWARD,CONTINUE,ONWARD,ONWARDS:
            {
              if player.param12 != 1 then
              {
              global room.die21
              }
              else
              {
              call OVER
              }
            }
        - OVER,ACROSS,WEST,W,CROSS:
            {
              if player.param12 != 1 then
              {
              println THERE IS NO WAY ACROSS THE FISSURE.
              }
              else
              {
              call unnamed444
              }
            }
        - *unnamed444:
            {
              goto room27
            }
  - room18:
      description:
        - true:
            THIS IS A LOW ROOM WITH A CRUDE NOTE ON THE WALL.  THE NOTE SAYS,
            "YOU WON'T GET IT UP THE STEPS".
      onEntry:
        {
          globalOnEntry
          player.find50 = 1
        }
      items:
        - GOLD
      entities:
      commands:
        - HALL,OUT,OUTSIDE,EXIT,LEAVE,NORTH,N:
            {
              goto room15
            }
  - room19:
      description:
        - true:
            YOU ARE IN THE HALL OF THE MOUNTAIN KING, WITH PASSAGES OFF IN ALL
            DIRECTIONS.
      items:
        - SNAKE
      entities:
      commands:
        - STAIRS,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,EAST,E:
            {
              goto room15
            }
        - NORTH,N,LEFT:
            {
              if player.param11 != 0 then
              {
              goto room28
              }
              else
              {
              call SOUTH
              }
            }
        - SOUTH,S,RIGHT:
            {
              if player.param11 != 0 then
              {
              goto room29
              }
              else
              {
              call WEST
              }
            }
        - WEST,W,FORWARD,CONTINUE,ONWARD,ONWARDS:
            {
              if player.param11 != 0 then
              {
              goto room30
              }
              else
              {
              call unnamed450
              }
            }
        - *unnamed450:
            {
              goto room32
            }
        - SW:
            {
              if rnd % 100 < 35 then
              {
              goto room74
              }
              else
              {
              call unnamed452
              }
            }
        - *unnamed452:
            {
              if has SNAKE then
              {
              goto room32
              }
              else
              {
              call SECRET
              }
            }
        - SECRET:
            {
              goto room74
            }
  - room20:
      description:
        - true:
            YOU ARE AT THE BOTTOM OF THE PIT WITH A BROKEN NECK.
      onEntry:
        {
          goto death
        }
      items:
      entities:
      commands:
  - room21:
      description:
        - true:
            YOU DIDN'T MAKE IT.
      onEntry:
        {
          goto death
        }
      items:
      entities:
      commands:
  - room22:
      description:
        - true:
            THE DOME IS UNCLIMBABLE.
      onEntry:
        {
          goto room15
        }
      items:
      entities:
      commands:
  - room23:
      description:
        - true:
            YOU ARE AT THE WEST END OF THE TWOPIT ROOM.  THERE IS A LARGE HOLE IN
            THE WALL ABOVE THE PIT AT THIS END OF THE ROOM.
      items:
        - PLANT2
      entities:
      commands:
        - EAST,E,ACROSS:
            {
              goto room67
            }
        - WEST,W,SLAB,SLABR:
            {
              goto room68
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,PIT:
            {
              goto room25
            }
        - HOLE:
            {
              println IT IS TOO FAR UP FOR YOU TO REACH.
            }
  - room24:
      description:
        - true:
            YOU ARE AT THE BOTTOM OF THE EASTERN PIT IN THE TWOPIT ROOM.  THERE IS
            A SMALL POOL OF OIL IN ONE CORNER OF THE PIT.
      items:
        - OIL
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room67
            }
  - room25:
      description:
        - true:
            YOU ARE AT THE BOTTOM OF THE WESTERN PIT IN THE TWOPIT ROOM.  THERE IS
            A LARGE HOLE IN THE WALL ABOUT 25 FEET ABOVE YOU.
      items:
        - PLANT
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room23
            }
        - CLIMB:
            {
              if player.param24 != 4 then
              {
              goto room31
              }
              else
              {
              call unnamed464
              }
            }
        - *unnamed464:
            {
              goto room26
            }
  - room26:
      description:
        - true:
            YOU CLAMBER UP THE PLANT AND SCURRY THROUGH THE HOLE AT THE TOP.
      onEntry:
        {
          goto room88
        }
      items:
      entities:
      commands:
  - room27:
      description:
        - true:
            YOU ARE ON THE WEST SIDE OF THE FISSURE IN THE HALL OF MISTS.
      onEntry:
        {
          globalOnEntry
          player.find51 = 1
        }
      items:
        - FISSURE
        - DIAMOND
      entities:
      commands:
        - JUMP:
            {
              if player.param12 != 0 then
              {
              println I RESPECTFULLY SUGGEST YOU GO ACROSS THE BRIDGE INSTEAD OF JUMPING.
              }
              else
              {
              call FORWARD,CONTINUE,ONWARD,ONWARDS
              }
            }
        - FORWARD,CONTINUE,ONWARD,ONWARDS:
            {
              if player.param12 != 1 then
              {
              global room.die21
              }
              else
              {
              call OVER
              }
            }
        - OVER,ACROSS,EAST,E,CROSS:
            {
              if player.param12 != 1 then
              {
              println THERE IS NO WAY ACROSS THE FISSURE.
              }
              else
              {
              call unnamed469
              }
            }
        - *unnamed469:
            {
              goto room17
            }
        - NORTH,N:
            {
              goto room40
            }
        - WEST,W:
            {
              goto room41
            }
  - room28:
      description:
        - true:
            YOU ARE IN A LOW N/S PASSAGE AT A HOLE IN THE FLOOR.  THE HOLE GOES
            DOWN TO AN E/W PASSAGE.
      onEntry:
        {
          globalOnEntry
          player.find52 = 1
        }
      items:
        - SILVER
      entities:
      commands:
        - HALL,OUT,OUTSIDE,EXIT,LEAVE,SOUTH,S:
            {
              goto room19
            }
        - NORTH,N,Y2:
            {
              goto room33
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,HOLE:
            {
              goto room36
            }
  - room29:
      description:
        - true:
            YOU ARE IN THE SOUTH SIDE CHAMBER.
      onEntry:
        {
          globalOnEntry
          player.find53 = 1
        }
      items:
        - JEWELRY
      entities:
      commands:
        - HALL,OUT,OUTSIDE,EXIT,LEAVE,NORTH,N:
            {
              goto room19
            }
  - room30:
      description:
        - true:
            YOU ARE IN THE WEST SIDE CHAMBER OF THE HALL OF THE MOUNTAIN KING.
            A PASSAGE CONTINUES WEST AND UP HERE.
      onEntry:
        {
          globalOnEntry
          player.find54 = 1
        }
      items:
        - COINS
      entities:
      commands:
        - HALL,OUT,OUTSIDE,EXIT,LEAVE,EAST,E:
            {
              goto room19
            }
        - WEST,W,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room62
            }
  - room31:
      description:
        - true:
            
      onEntry:
        {
          goto room90
        }
      items:
      entities:
      commands:
  - room32:
      description:
        - true:
            YOU CAN'T GET BY THE SNAKE.
      onEntry:
        {
          goto room19
        }
      items:
      entities:
      commands:
  - room33:
      description:
        - true:
            YOU ARE IN A LARGE ROOM, WITH A PASSAGE TO THE SOUTH, A PASSAGE TO THE
            WEST, AND A WALL OF BROKEN ROCK TO THE EAST.  THERE IS A LARGE "Y2" ON
            A ROCK IN THE ROOM'S CENTER.
      onEntry:
        {
          globalOnEntry

          if rnd % 100 < 25 && player.closing == 0 then
          {
            println A HOLLOW VOICE SAYS "PLUGH".
          }
        }
      items:
      entities:
      commands:
        - PLUGH:
            {
              goto room3
            }
        - SOUTH,S:
            {
              goto room28
            }
        - EAST,E,WALL,BROKE:
            {
              goto room34
            }
        - WEST,W:
            {
              goto room35
            }
        - PLOVER:
            {
              if has EMERALD then
              {
                drop EMERALD
              }
              call unnamed486
            }
        - *unnamed486:
            {
              goto room100
            }
  - room34:
      description:
        - true:
            YOU ARE IN A JUMBLE OF ROCK, WITH CRACKS EVERYWHERE.
      items:
      entities:
      commands:
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,Y2:
            {
              goto room33
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room15
            }
  - room35:
      description:
        - true:
            YOU'RE AT A LOW WINDOW OVERLOOKING A HUGE PIT, WHICH EXTENDS UP OUT OF
            SIGHT.
            WHITE MIST COVER THE FLOOR OF THE PIT, BECOMING THICKER TO THE RIGHT.
            MARKS IN THE DUST AROUND THE WINDOW WOULD SEEM TO INDICATE THAT
            SOMEONE HAS BEEN HERE RECENTLY.  DIRECTLY ACROSS THE PIT FROM YOU AND
            25 FEET AWAY THERE IS A SIMILAR WINDOW LOOKING INTO A LIGHTED ROOM.  A
            SHADOWY FIGURE CAN BE SEEN THERE PEERING BACK AT YOU.
      items:
        - SHADOW
      entities:
      commands:
        - EAST,E,Y2:
            {
              goto room33
            }
        - JUMP:
            {
              global room.die20
            }
  - room36:
      description:
        - true:
            YOU ARE IN A DIRTY BROKEN PASSAGE.  TO THE EAST IS A CRAWL.  TO THE
            WEST IS A LARGE PASSAGE.  ABOVE YOU IS A HOLE TO ANOTHER PASSAGE.
      items:
      entities:
      commands:
        - EAST,E,CRAWL:
            {
              goto room37
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,HOLE:
            {
              goto room28
            }
        - WEST,W:
            {
              goto room39
            }
        - BEDQUILT:
            {
              goto room65
            }
  - room37:
      description:
        - true:
            YOU ARE ON THE BRINK OF A SMALL CLEAN CLIMBABLE PIT.  A CRAWL LEADS
            WEST.
      items:
      entities:
      commands:
        - WEST,W,CRAWL:
            {
              goto room36
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,PIT,CLIMB:
            {
              goto room38
            }
  - room38:
      description:
        - true:
            YOU ARE IN THE BOTTOM OF A SMALL PIT WITH A LITTLE STREAM, WHICH
            ENTERS AND EXITS THROUGH TINY SLITS.
      items:
        - WATER
      entities:
      commands:
        - CLIMB,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room37
            }
        - SLIT,STREAM,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,UPSTREAM,DOWNSTREAM:
            {
              println YOU DON'T FIT THROUGH A TWO-INCH SLIT!
            }
  - room39:
      description:
        - true:
            YOU ARE IN A LARGE ROOM FULL OF DUSTY ROCKS.  THERE IS A BIG HOLE IN
            THE FLOOR.  THERE ARE CRACKS EVERYWHERE, AND A PASSAGE LEADING EAST.
      items:
      entities:
      commands:
        - EAST,E,PASSAGE,TUNNEL:
            {
              goto room36
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,HOLE,FLOOR:
            {
              goto room64
            }
        - BEDQUILT:
            {
              goto room65
            }
  - room40:
      description:
        - true:
            YOU HAVE CRAWLED THROUGH A VERY LOW WIDE PASSAGE PARALLEL TO AND NORTH
            OF THE HALL OF MISTS.
      onEntry:
        {
          goto room41
        }
      items:
      entities:
      commands:
  - room41:
      description:
        - true:
            YOU ARE AT THE WEST END OF HALL OF MISTS.  A LOW WIDE CRAWL CONTINUES
            WEST AND ANOTHER GOES NORTH.  TO THE SOUTH IS A LITTLE PASSAGE 6 FEET
            OFF THE FLOOR.
      items:
      entities:
      commands:
        - SOUTH,S,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,PASSAGE,TUNNEL,CLIMB:
            {
              goto room42
            }
        - EAST,E:
            {
              goto room27
            }
        - NORTH,N:
            {
              goto room59
            }
        - WEST,W,CRAWL:
            {
              goto room60
            }
  - room42:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room41
            }
        - NORTH,N:
            {
              goto room42
            }
        - EAST,E:
            {
              goto room43
            }
        - SOUTH,S:
            {
              goto room45
            }
        - WEST,W:
            {
              goto room80
            }
  - room43:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room42
            }
        - SOUTH,S:
            {
              goto room44
            }
        - EAST,E:
            {
              goto room45
            }
  - room44:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - EAST,E:
            {
              goto room43
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room48
            }
        - SOUTH,S:
            {
              goto room50
            }
        - NORTH,N:
            {
              goto room82
            }
  - room45:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room42
            }
        - NORTH,N:
            {
              goto room43
            }
        - EAST,E:
            {
              goto room46
            }
        - SOUTH,S:
            {
              goto room47
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room87
            }
  - room46:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - WEST,W,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room45
            }
  - room47:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - EAST,E,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room45
            }
  - room48:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room44
            }
  - room49:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - EAST,E:
            {
              goto room50
            }
        - WEST,W:
            {
              goto room51
            }
  - room50:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - EAST,E:
            {
              goto room44
            }
        - WEST,W:
            {
              goto room49
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room51
            }
        - SOUTH,S:
            {
              goto room52
            }
  - room51:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room49
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room50
            }
        - EAST,E:
            {
              goto room52
            }
        - SOUTH,S:
            {
              goto room53
            }
  - room52:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room50
            }
        - EAST,E:
            {
              goto room51
            }
        - SOUTH,S:
            {
              goto room52
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room53
            }
        - NORTH,N:
            {
              goto room55
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room86
            }
  - room53:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room51
            }
        - NORTH,N:
            {
              goto room52
            }
        - SOUTH,S:
            {
              goto room54
            }
  - room54:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - WEST,W,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room53
            }
  - room55:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room52
            }
        - NORTH,N:
            {
              goto room55
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room56
            }
        - EAST,E:
            {
              goto room57
            }
  - room56:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room55
            }
  - room57:
      description:
        - true:
            YOU ARE ON THE BRINK OF A THIRTY FOOT PIT WITH A MASSIVE ORANGE COLUMN
            DOWN ONE WALL.
            UP.  THE MAZE CONTINUES AT THIS LEVEL.
      items:
      entities:
      commands:
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,CLIMB:
            {
              goto room13
            }
        - WEST,W:
            {
              goto room55
            }
        - SOUTH,S:
            {
              goto room58
            }
        - NORTH,N:
            {
              goto room83
            }
        - EAST,E:
            {
              goto room84
            }
  - room58:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - EAST,E,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room57
            }
  - room59:
      description:
        - true:
            YOU HAVE CRAWLED THROUGH A VERY LOW WIDE PASSAGE PARALLEL TO AND NORTH
            OF THE HALL OF MISTS.
      onEntry:
        {
          goto room27
        }
      items:
      entities:
      commands:
  - room60:
      description:
        - true:
            YOU ARE AT THE EAST END OF A VERY LONG HALL APPARENTLY WITHOUT SIDE
            CHAMBERS.  TO THE EAST A LOW WIDE CRAWL SLANTS UP.  TO THE NORTH A
            ROUND TWO FOOT HOLE SLANTS DOWN.
      items:
      entities:
      commands:
        - EAST,E,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,CRAWL:
            {
              goto room41
            }
        - WEST,W:
            {
              goto room61
            }
        - NORTH,N,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,HOLE:
            {
              goto room62
            }
  - room61:
      description:
        - true:
            YOU ARE AT THE WEST END OF A VERY LONG FEATURELESS HALL.  THE HALL
            JOINS UP WITH A NARROW NORTH/SOUTH PASSAGE.
      items:
      entities:
      commands:
        - EAST,E:
            {
              goto room60
            }
        - NORTH,N:
            {
              goto room62
            }
        - SOUTH,S:
            {
              goto room107
            }
  - room62:
      description:
        - true:
            YOU ARE AT A CROSSOVER OF A HIGH N/S PASSAGE AND A LOW E/W ONE.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room60
            }
        - NORTH,N:
            {
              goto room63
            }
        - EAST,E:
            {
              goto room30
            }
        - SOUTH,S:
            {
              goto room61
            }
  - room63:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - SOUTH,S,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room62
            }
  - room64:
      description:
        - true:
            YOU ARE AT A COMPLEX JUNCTION.
            NORTH JOINS A HIGHER CRAWL FROM THE EAST TO MAKE A WALKING PASSAGE
            GOING WEST.  THERE IS ALSO A LARGE ROOM ABOVE.
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,CLIMB,ROOM:
            {
              goto room39
            }
        - WEST,W,BEDQUILT:
            {
              goto room65
            }
        - NORTH,N,SHELL:
            {
              goto room103
            }
        - EAST,E:
            {
              goto room106
            }
  - room65:
      description:
        - true:
            YOU ARE IN BEDQUILT, A LONG EAST/WEST PASSAGE WITH HOLES EVERYWHERE.
            TO EXPLORE AT RANDOM SELECT NORTH, SOUTH, UP, OR DOWN.
      items:
      entities:
      commands:
        - EAST,E:
            {
              goto room64
            }
        - WEST,W:
            {
              goto room66
            }
        - SOUTH,S:
            {
              if rnd % 100 < 80 then
              {
              println YOU HAVE CRAWLED AROUND IN SOME LITTLE HOLES AND WOUND UP BACK IN THE
              println MAIN PASSAGE.
              }
              else
              {
              call SLAB,SLABR
              }
            }
        - SLAB,SLABR:
            {
              goto room68
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              if rnd % 100 < 80 then
              {
              println YOU HAVE CRAWLED AROUND IN SOME LITTLE HOLES AND WOUND UP BACK IN THE
              println MAIN PASSAGE.
              }
              else
              {
              call unnamed579
              }
            }
        - *unnamed579:
            {
              if rnd % 100 < 50 then
              {
              goto room70
              }
              else
              {
              call unnamed580
              }
            }
        - *unnamed580:
            {
              goto room39
            }
        - NORTH,N:
            {
              if rnd % 100 < 60 then
              {
              println YOU HAVE CRAWLED AROUND IN SOME LITTLE HOLES AND WOUND UP BACK IN THE
              println MAIN PASSAGE.
              }
              else
              {
              call unnamed582
              }
            }
        - *unnamed582:
            {
              if rnd % 100 < 75 then
              {
              goto room72
              }
              else
              {
              call unnamed583
              }
            }
        - *unnamed583:
            {
              goto room71
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              if rnd % 100 < 80 then
              {
              println YOU HAVE CRAWLED AROUND IN SOME LITTLE HOLES AND WOUND UP BACK IN THE
              println MAIN PASSAGE.
              }
              else
              {
              call unnamed585
              }
            }
        - *unnamed585:
            {
              goto room106
            }
  - room66:
      description:
        - true:
            YOU ARE IN A ROOM WHOSE WALLS RESEMBLE SWISS CHEESE.  OBVIOUS PASSAGES
            GO WEST, EAST, NE, AND NW.  PART OF THE ROOM IS OCCUPIED BY A LARGE
            BEDROCK BLOCK.
      items:
      entities:
      commands:
        - NE:
            {
              goto room65
            }
        - WEST,W:
            {
              goto room67
            }
        - SOUTH,S:
            {
              if rnd % 100 < 80 then
              {
              println YOU HAVE CRAWLED AROUND IN SOME LITTLE HOLES AND WOUND UP BACK IN THE
              println MAIN PASSAGE.
              }
              else
              {
              call CANYON
              }
            }
        - CANYON:
            {
              goto room77
            }
        - EAST,E:
            {
              goto room96
            }
        - NW:
            {
              if rnd % 100 < 50 then
              {
              println YOU HAVE CRAWLED AROUND IN SOME LITTLE HOLES AND WOUND UP BACK IN THE
              println MAIN PASSAGE.
              }
              else
              {
              call ORIENTAL
              }
            }
        - ORIENTAL:
            {
              goto room97
            }
  - room67:
      description:
        - true:
            YOU ARE AT THE EAST END OF THE TWOPIT ROOM.  THE FLOOR HERE IS
            LITTERED WITH THIN ROCK SLABS, WHICH MAKE IT EASY TO DESCEND THE PITS.
            THERE IS A PATH HERE BYPASSING THE PITS TO CONNECT PASSAGES FROM EAST
            AND WEST.  THERE ARE HOLES ALL OVER, BUT THE ONLY BIG ONE IS ON THE
            WALL DIRECTLY OVER THE WEST PIT WHERE YOU CAN'T GET TO IT.
      items:
        - PLANT2
      entities:
      commands:
        - EAST,E:
            {
              goto room66
            }
        - WEST,W,ACROSS:
            {
              goto room23
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,PIT:
            {
              goto room24
            }
  - room68:
      description:
        - true:
            YOU ARE IN A LARGE LOW CIRCULAR CHAMBER WHOSE FLOOR IS AN IMMENSE SLAB
            FALLEN FROM THE CEILING (SLAB ROOM).  EAST AND WEST THERE ONCE WERE
            LARGE PASSAGES, BUT THEY ARE NOW FILLED WITH BOULDERS.
            PASSAGES GO NORTH AND SOUTH, AND THE SOUTH ONE QUICKLY BENDS WEST
            AROUND THE BOULDERS.
      items:
      entities:
      commands:
        - SOUTH,S:
            {
              goto room23
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,CLIMB:
            {
              goto room69
            }
        - NORTH,N:
            {
              goto room65
            }
  - room69:
      description:
        - true:
            YOU ARE IN A SECRET N/S CANYON ABOVE A LARGE ROOM.
      items:
      entities:
      commands:
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,SLAB,SLABR:
            {
              goto room68
            }
        - SOUTH,S:
            {
              if player.param31 != 0 then
              {
              goto room120
              }
              else
              {
              call unnamed601
              }
            }
        - *unnamed601:
            {
              goto room119
            }
        - NORTH,N:
            {
              goto room109
            }
        - RESERVOIR:
            {
              goto room113
            }
  - room70:
      description:
        - true:
            YOU ARE IN A SECRET N/S CANYON ABOVE A SIZABLE PASSAGE.
      items:
      entities:
      commands:
        - NORTH,N:
            {
              goto room71
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,PASSAGE,TUNNEL:
            {
              goto room65
            }
        - SOUTH,S:
            {
              goto room111
            }
  - room71:
      description:
        - true:
            YOU ARE IN A SECRET CANYON AT A JUNCTION OF THREE CANYONS, BEARING
            NORTH, SOUTH, AND SE.  THE NORTH ONE IS AS TALL AS THE OTHER TWO
            COMBINED.
      items:
      entities:
      commands:
        - SE:
            {
              goto room65
            }
        - SOUTH,S:
            {
              goto room70
            }
        - NORTH,N:
            {
              goto room110
            }
  - room72:
      description:
        - true:
            YOU ARE IN A LARGE LOW ROOM.  CRAWLS LEAD NORTH, SE, AND SW.
      items:
      entities:
      commands:
        - BEDQUILT:
            {
              goto room65
            }
        - SW:
            {
              goto room118
            }
        - NORTH,N:
            {
              goto room73
            }
        - SE,ORIENTAL:
            {
              goto room97
            }
  - room73:
      description:
        - true:
            DEAD END CRAWL.
      items:
      entities:
      commands:
        - SOUTH,S,CRAWL,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room72
            }
  - room74:
      description:
        - true:
            YOU ARE IN A SECRET CANYON WHICH HERE RUNS E/W.  IT CROSSES OVER A
            VERY TIGHT CANYON 15 FEET BELOW.  IF YOU GO DOWN YOU MAY NOT BE ABLE
            TO GET BACK UP.
      items:
      entities:
      commands:
        - EAST,E:
            {
              goto room19
            }
        - WEST,W:
            {
              if player.param31 != 0 then
              {
              goto room120
              }
              else
              {
              call unnamed617
              }
            }
        - *unnamed617:
            {
              goto room121
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room75
            }
  - room75:
      description:
        - true:
            YOU ARE AT A WIDE PLACE IN A VERY TIGHT N/S CANYON.
      items:
      entities:
      commands:
        - SOUTH,S:
            {
              goto room76
            }
        - NORTH,N:
            {
              goto room77
            }
  - room76:
      description:
        - true:
            THE CANYON HERE BECOMES TOO TIGHT TO GO FURTHER SOUTH.
      items:
      entities:
      commands:
        - NORTH,N:
            {
              goto room75
            }
  - room77:
      description:
        - true:
            YOU ARE IN A TALL E/W CANYON.  A LOW TIGHT CRAWL GOES 3 FEET NORTH AND
            SEEMS TO OPEN UP.
      items:
      entities:
      commands:
        - EAST,E:
            {
              goto room75
            }
        - WEST,W:
            {
              goto room78
            }
        - NORTH,N,CRAWL:
            {
              goto room66
            }
  - room78:
      description:
        - true:
            THE CANYON RUNS INTO A MASS OF BOULDERS -- DEAD END.
      items:
      entities:
      commands:
        - SOUTH,S:
            {
              goto room77
            }
  - room79:
      description:
        - true:
            THE STREAM FLOWS OUT THROUGH A PAIR OF 1 FOOT DIAMETER SEWER PIPES.
            IT WOULD BE ADVISABLE TO USE THE EXIT.
      onEntry:
        {
          goto room3
        }
      items:
      entities:
      commands:
  - room80:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - NORTH,N:
            {
              goto room42
            }
        - WEST,W:
            {
              goto room80
            }
        - SOUTH,S:
            {
              goto room80
            }
        - EAST,E:
            {
              goto room81
            }
  - room81:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - WEST,W,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room80
            }
  - room82:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - SOUTH,S,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room44
            }
  - room83:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - SOUTH,S:
            {
              goto room57
            }
        - EAST,E:
            {
              goto room84
            }
        - WEST,W:
            {
              goto room85
            }
  - room84:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - NORTH,N:
            {
              goto room57
            }
        - WEST,W:
            {
              goto room83
            }
        - NW:
            {
              goto room114
            }
  - room85:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - EAST,E,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room83
            }
  - room86:
      description:
        - true:
            DEAD END
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room52
            }
  - room87:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL ALIKE.
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room45
            }
  - room88:
      description:
        - true:
            YOU ARE IN A LONG, NARROW CORRIDOR STRETCHING OUT OF SIGHT TO THE
            WEST.  AT THE EASTERN END IS A HOLE THROUGH WHICH YOU CAN SEE A
            PROFUSION OF LEAVES.
      items:
      entities:
      commands:
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,CLIMB,EAST,E:
            {
              goto room25
            }
        - JUMP:
            {
              global room.die20
            }
        - WEST,W,GIANT:
            {
              goto room92
            }
  - room89:
      description:
        - true:
            THERE IS NOTHING HERE TO CLIMB.  USE "UP" OR "OUT" TO LEAVE THE PIT.
      onEntry:
        {
          goto room25
        }
      items:
      entities:
      commands:
  - room90:
      description:
        - true:
            YOU HAVE CLIMBED UP THE PLANT AND OUT OF THE PIT.
      onEntry:
        {
          goto room23
        }
      items:
      entities:
      commands:
  - room91:
      description:
        - true:
            YOU ARE AT THE TOP OF A STEEP INCLINE ABOVE A LARGE ROOM.  YOU COULD
            CLIMB DOWN HERE, BUT YOU WOULD NOT BE ABLE TO CLIMB UP.  THERE IS A
            PASSAGE LEADING BACK TO THE NORTH.
      items:
      entities:
      commands:
        - NORTH,N,CAVERN,PASSAGE,TUNNEL:
            {
              goto room95
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,CLIMB:
            {
              goto room72
            }
  - room92:
      description:
        - true:
            YOU ARE IN THE GIANT ROOM.  THE CEILING HERE IS TOO HIGH UP FOR YOUR
            LAMP TO SHOW IT.  CAVERNOUS PASSAGES LEAD EAST, NORTH, AND SOUTH.  ON
            THE WEST WALL IS SCRAWLED THE INSCRIPTION, "FEE FIE FOE FOO" [SIC].
      onEntry:
        {
          globalOnEntry
          player.find56 = 1
        }
      items:
        - EGGS
      entities:
      commands:
        - SOUTH,S:
            {
              goto room88
            }
        - EAST,E:
            {
              goto room93
            }
        - NORTH,N:
            {
              goto room94
            }
  - room93:
      description:
        - true:
            THE PASSAGE HERE IS BLOCKED BY A RECENT CAVE-IN.
      items:
      entities:
      commands:
        - SOUTH,S,GIANT,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room92
            }
  - room94:
      description:
        - true:
            YOU ARE AT ONE END OF AN IMMENSE NORTH/SOUTH PASSAGE.
      items:
        - DOOR
      entities:
      commands:
        - SOUTH,S,GIANT,PASSAGE,TUNNEL:
            {
              goto room92
            }
        - NORTH,N,ENTER,CAVERN:
            {
              if player.param9 != 0 then
              {
              goto room95
              }
              else
              {
              call unnamed655
              }
            }
        - *unnamed655:
            {
              println THE DOOR IS EXTREMELY RUSTY AND REFUSES TO OPEN.
            }
  - room95:
      description:
        - true:
            YOU ARE IN A MAGNIFICENT CAVERN WITH A RUSHING STREAM, WHICH CASCADES
            OVER A SPARKLING WATERFALL INTO A ROARING WHIRLPOOL WHICH DISAPPEARS
            THROUGH A HOLE IN THE FLOOR.  PASSAGES EXIT TO THE SOUTH AND WEST.
      onEntry:
        {
          globalOnEntry
          player.find57 = 1
        }
      items:
        - TRIDENT
        - WATER
      entities:
      commands:
        - SOUTH,S,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room94
            }
        - GIANT:
            {
              goto room92
            }
        - WEST,W:
            {
              goto room91
            }
  - room96:
      description:
        - true:
            YOU ARE IN THE SOFT ROOM.  THE WALLS ARE COVERED WITH HEAVY CURTAINS,
            THE FLOOR WITH A THICK PILE CARPET.  MOSS COVERS THE CEILING.
      items:
        - PILLOW
        - CARPET
      entities:
      commands:
        - WEST,W,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room66
            }
  - room97:
      description:
        - true:
            THIS IS THE ORIENTAL ROOM.  ANCIENT ORIENTAL CAVE DRAWINGS COVER THE
            WALLS.
            PASSAGE LEADS SE, AND A HANDS AND KNEES CRAWL LEADS WEST.
      onEntry:
        {
          globalOnEntry
          player.find58 = 1
        }
      items:
        - DRAWING
        - VASE
      entities:
      commands:
        - SE:
            {
              goto room66
            }
        - WEST,W,CRAWL:
            {
              goto room72
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,NORTH,N,CAVERN:
            {
              goto room98
            }
  - room98:
      description:
        - true:
            YOU ARE FOLLOWING A WIDE PATH AROUND THE OUTER EDGE OF A LARGE CAVERN.
            FAR BELOW, THROUGH A HEAVY WHITE MIST, STRANGE SPLASHING NOISES CAN BE
            HEARD.
            EXITS TO THE SOUTH AND WEST.
      items:
      entities:
      commands:
        - SOUTH,S,ORIENTAL:
            {
              goto room97
            }
        - WEST,W:
            {
              goto room99
            }
  - room99:
      description:
        - true:
            YOU ARE IN AN ALCOVE.  A SMALL NW PATH SEEMS TO WIDEN AFTER A SHORT
            DISTANCE.  AN EXTREMELY TIGHT TUNNEL LEADS EAST.  IT LOOKS LIKE A VERY
            TIGHT SQUEEZE.
      items:
      entities:
      commands:
        - NW,CAVERN:
            {
              goto room98
            }
        - EAST,E,PASSAGE,TUNNEL:
            {
              if invcount == 0 || (invcount == 1 && has EMERALD) then
              {
                # panika -> będzie jeszcze gdzieś indziej
                if player.closing == 1 then
                {
                  println A MYSTERIOUS RECORDED VOICE GROANS INTO LIFE AND ANNOUNCES:
                  println    "THIS EXIT IS CLOSED.  PLEASE LEAVE VIA MAIN OFFICE."
                  if player.panic == 0 then
                  {
                    player.clock2 = 15
                  }
                  player.panic = 1
                }
                # tu jeszcze rzeczy z krasnoludami
                goto room100
              }
              else
              {
                println SOMETHING YOU'RE CARRYING WON'T FIT THROUGH THE TUNNEL WITH YOU.
                println YOU'D BEST TAKE INVENTORY AND DROP SOMETHING.
              }
            }
        - *unnamed667:
            {
              goto room100
            }
  - room100:
      description:
        - true:
            YOU'RE IN A SMALL CHAMBER LIT BY AN EERIE GREEN LIGHT.
            NARROW TUNNEL EXITS TO THE WEST.  A DARK CORRIDOR LEADS NE.
      onEntry:
        {
          globalOnEntry
          player.find59 = 1
        }
      items:
        - EMERALD
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - WEST,W,PASSAGE,TUNNEL,OUT,OUTSIDE,EXIT,LEAVE:
            {
              if invcount == 0 || (invcount == 1 && has EMERA) then
              {
                # panika -> będzie jeszcze gdzieś indziej
                if player.closing == 1 then
                {
                  println A MYSTERIOUS RECORDED VOICE GROANS INTO LIFE AND ANNOUNCES:
                  println    "THIS EXIT IS CLOSED.  PLEASE LEAVE VIA MAIN OFFICE."
                  if player.panic == 0 then
                  {
                    player.clock2 = 15
                  }
                  player.panic = 1
                }
                # tu jeszcze rzeczy z krasnoludami
                goto room99
              }
              else
              {
                println SOMETHING YOU'RE CARRYING WON'T FIT THROUGH THE TUNNEL WITH YOU.
                println YOU'D BEST TAKE INVENTORY AND DROP SOMETHING.
              }
            }
        - *unnamed669:
            {
              goto room99
            }
        - PLOVER:
            {
              if has EMERALD then
              {
                drop EMERALD
              }
              call unnamed671
            }
        - *unnamed671:
            {
              goto room33
            }
        - NE,DARK:
            {
              goto room101
            }
  - room101:
      description:
        - true:
            YOU'RE IN THE DARK-ROOM.  A CORRIDOR LEADING SOUTH IS THE ONLY EXIT.
      onEntry:
        {
          globalOnEntry
          player.find60 = 1
        }
      items:
        - TABLET
        - PLATINUM
      entities:
      commands:
        - SOUTH,S,PLOVER,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room100
            }
  - room102:
      description:
        - true:
            YOU ARE IN AN ARCHED HALL.  A CORAL PASSAGE ONCE CONTINUED UP AND EAST
            FROM HERE, BUT IS NOW BLOCKED BY DEBRIS.  THE AIR SMELLS OF SEA WATER.
      items:
      entities:
      commands:
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,SHELL,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room103
            }
  - room103:
      description:
        - true:
            YOU'RE IN A LARGE ROOM CARVED OUT OF SEDIMENTARY ROCK.
            WALLS ARE LITTERED WITH BITS OF SHELLS IMBEDDED IN THE STONE.  A
            SHALLOW PASSAGE PROCEEDS DOWNWARD, AND A SOMEWHAT STEEPER ONE LEADS
            UP.  A LOW HANDS AND KNEES PASSAGE ENTERS FROM THE SOUTH.
      items:
        - CLAM
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,HALL:
            {
              goto room102
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room104
            }
        - SOUTH,S:
            {
              if has CLAM then
              {
              println YOU CAN'T FIT THIS FIVE-FOOT CLAM THROUGH THAT LITTLE PASSAGE!
              }
              else
              {
              call unnamed678
              }
            }
        - *unnamed678:
            {
              if has OYSTER then
              {
              println YOU CAN'T FIT THIS FIVE-FOOT OYSTER THROUGH THAT LITTLE PASSAGE!
              }
              else
              {
              call unnamed679
              }
            }
        - *unnamed679:
            {
              goto room64
            }
  - room104:
      description:
        - true:
            YOU ARE IN A LONG SLOPING CORRIDOR WITH RAGGED SHARP WALLS.
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,SHELL:
            {
              goto room103
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room105
            }
  - room105:
      description:
        - true:
            YOU ARE IN A CUL-DE-SAC ABOUT EIGHT FEET ACROSS.
      onEntry:
        {
          globalOnEntry
          if present PEARL then
          {
            player.find61 = 1
          }
        }
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room104
            }
        - SHELL:
            {
              goto room103
            }
  - room106:
      description:
        - true:
            YOU ARE IN AN ANTEROOM LEADING TO A LARGE PASSAGE TO THE EAST.
            PASSAGES GO WEST AND UP.  THE REMNANTS OF RECENT DIGGING ARE EVIDENT.
            A SIGN IN MIDAIR HERE SAYS "CAVE UNDER CONSTRUCTION BEYOND THIS POINT.
            PROCEED AT OWN RISK.  [WITT CONSTRUCTION COMPANY]"
      items:
        - MAGAZINE
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room64
            }
        - WEST,W:
            {
              goto room65
            }
        - EAST,E:
            {
              goto room108
            }
  - room107:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTY LITTLE PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - SOUTH,S:
            {
              goto room131
            }
        - SW:
            {
              goto room132
            }
        - NE:
            {
              goto room133
            }
        - SE:
            {
              goto room134
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room135
            }
        - NW:
            {
              goto room136
            }
        - EAST,E:
            {
              goto room137
            }
        - WEST,W:
            {
              goto room138
            }
        - NORTH,N:
            {
              goto room139
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room61
            }
  - room108:
      description:
        - true:
            YOU ARE AT WITT'S END.
      items:
      entities:
      commands:
        - EAST,E,NORTH,N,SOUTH,S,NE,SE,SW,NW,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              if rnd % 100 < 95 then
              {
              println YOU HAVE CRAWLED AROUND IN SOME LITTLE HOLES AND WOUND UP BACK IN THE
              println MAIN PASSAGE.
              }
              else
              {
              call unnamed698
              }
            }
        - *unnamed698:
            {
              goto room106
            }
        - WEST,W:
            {
              println YOU HAVE CRAWLED AROUND IN SOME LITTLE HOLES AND FOUND YOUR WAY
              println BLOCKED BY A RECENT CAVE-IN.  YOU ARE NOW BACK IN THE MAIN PASSAGE.
            }
  - room109:
      description:
        - true:
            YOU ARE IN A NORTH/SOUTH CANYON ABOUT 25 FEET ACROSS.  THE FLOOR IS
            COVERED BY WHITE MIST SEEPING IN FROM THE NORTH.  THE WALLS EXTEND
            UPWARD FOR WELL OVER 100 FEET.
            ABOVE YOU, AN ENORMOUS TWO-SIDED MIRROR IS HANGING PARALLEL TO AND
            MIDWAY BETWEEN THE CANYON WALLS.  (THE MIRROR IS OBVIOUSLY PROVIDED
            FOR THE USE OF THE DWARVES, WHO AS YOU KNOW, ARE EXTREMELY VAIN.)  A
            SMALL WINDOW CAN BE SEEN IN EITHER WALL, SOME FIFTY FEET UP.
      items:
        - MIRROR
      entities:
      commands:
        - SOUTH,S:
            {
              goto room69
            }
        - NORTH,N,RESERVOIR:
            {
              goto room113
            }
  - room110:
      description:
        - true:
            YOU'RE AT A LOW WINDOW OVERLOOKING A HUGE PIT, WHICH EXTENDS UP OUT OF
            SIGHT.
            WHITE MIST COVER THE FLOOR OF THE PIT, BECOMING THICKER TO THE LEFT.
            MARKS IN THE DUST AROUND THE WINDOW WOULD SEEM TO INDICATE THAT
            SOMEONE HAS BEEN HERE RECENTLY.  DIRECTLY ACROSS THE PIT FROM YOU AND
            25 FEET AWAY THERE IS A SIMILAR WINDOW LOOKING INTO A LIGHTED ROOM.  A
            SHADOWY FIGURE CAN BE SEEN THERE PEERING BACK AT YOU.
      items:
        - SHADOW
      entities:
      commands:
        - WEST,W:
            {
              goto room71
            }
        - JUMP:
            {
              global room.die20
            }
  - room111:
      description:
        - true:
            A LARGE STALACTITE EXTENDS FROM THE ROOF AND ALMOST REACHES THE FLOOR
            BELOW.
            HAVING DONE SO YOU WOULD BE UNABLE TO REACH IT TO CLIMB BACK UP.
      items:
        - STALACTITE
      entities:
      commands:
        - NORTH,N:
            {
              goto room70
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,JUMP,CLIMB:
            {
              if rnd % 100 < 40 then
              {
              goto room50
              }
              else
              {
              call unnamed706
              }
            }
        - *unnamed706:
            {
              if rnd % 100 < 50 then
              {
              goto room53
              }
              else
              {
              call unnamed707
              }
            }
        - *unnamed707:
            {
              goto room45
            }
  - room112:
      description:
        - true:
            YOU ARE IN A LITTLE MAZE OF TWISTING PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - SW:
            {
              goto room131
            }
        - NORTH,N:
            {
              goto room132
            }
        - EAST,E:
            {
              goto room133
            }
        - NW:
            {
              goto room134
            }
        - SE:
            {
              goto room135
            }
        - NE:
            {
              goto room136
            }
        - WEST,W:
            {
              goto room137
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room138
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room139
            }
        - SOUTH,S:
            {
              goto room140
            }
  - room113:
      description:
        - true:
            YOU ARE AT THE EDGE OF A LARGE UNDERGROUND RESERVOIR.  AN OPAQUE CLOUD
            OF WHITE MIST FILLS THE ROOM AND RISES RAPIDLY UPWARD.
            FED BY A STREAM, WHICH TUMBLES OUT OF A HOLE IN THE WALL ABOUT 10 FEET
            OVERHEAD AND SPLASHES NOISILY INTO THE WATER SOMEWHERE WITHIN THE
            MIST.  THE ONLY PASSAGE GOES BACK TOWARD THE SOUTH.
      items:
        - WATER
      entities:
      commands:
        - SOUTH,S,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room109
            }
  - room114:
      description:
        - true:
            DEAD END
      onEntry:
      {
        globalOnEntry
        player.find55 = 1
      }
      items:
        - CHEST
      entities:
      commands:
        - SE:
            {
              goto room84
            }
  - room115:
      description:
        - true:
            YOU ARE AT THE NORTHEAST END OF AN IMMENSE ROOM, EVEN LARGER THAN THE
            GIANT ROOM.  IT APPEARS TO BE A REPOSITORY FOR THE "ADVENTURE"
            PROGRAM.  MASSIVE TORCHES FAR OVERHEAD BATHE THE ROOM WITH SMOKY
            YELLOW LIGHT.  SCATTERED ABOUT YOU CAN BE SEEN A PILE OF BOTTLES (ALL
            OF THEM EMPTY), A NURSERY OF YOUNG BEANSTALKS MURMURING QUIETLY, A BED
            OF OYSTERS, A BUNDLE OF BLACK RODS WITH RUSTY STARS ON THEIR ENDS, AND
            A COLLECTION OF BRASS LANTERNS.  OFF TO ONE SIDE A GREAT MANY DWARVES
            ARE SLEEPING ON THE FLOOR, SNORING LOUDLY.  A SIGN NEARBY READS: "DO
            NOT DISTURB THE DWARVES!"  AN IMMENSE MIRROR IS HANGING AGAINST ONE
            WALL, AND STRETCHES TO THE OTHER END OF THE ROOM, WHERE VARIOUS OTHER
            SUNDRY OBJECTS CAN BE GLIMPSED DIMLY IN THE DISTANCE.
      items:
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - SW:
            {
              goto room116
            }
        - BLAST,DETONATE,IGNITE,BLOWUP:
            {
              if player.param6 >= 0 && player.closed == 1 then
              {
                println THERE IS A LOUD EXPLOSION, AND A TWENTY-FOOT HOLE APPEARS IN THE FAR
                println WALL, BURYING THE SNAKES IN THE RUBBLE.  A RIVER OF MOLTEN LAVA POURS
                println IN THROUGH THE HOLE, DESTROYING EVERYTHING IN ITS PATH, INCLUDING YOU!
                global room.die
              }
            }
  - room116:
      description:
        - true:
            YOU ARE AT THE SOUTHWEST END OF THE REPOSITORY.  TO ONE SIDE IS A PIT
            FULL OF FIERCE GREEN SNAKES.  ON THE OTHER SIDE IS A ROW OF SMALL
            WICKER CAGES, EACH OF WHICH CONTAINS A LITTLE SULKING BIRD.  IN ONE
            CORNER IS A BUNDLE OF BLACK RODS WITH RUSTY MARKS ON THEIR ENDS.  A
            LARGE NUMBER OF VELVET PILLOWS ARE SCATTERED ABOUT ON THE FLOOR.  A
            VAST MIRROR STRETCHES OFF TO THE NORTHEAST.  AT YOUR FEET IS A LARGE
            STEEL GRATE, NEXT TO WHICH IS A SIGN WHICH READS, "TREASURE VAULT.
            KEYS IN MAIN OFFICE."
      items:
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - NE:
            {
              goto room115
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              println YOU CAN'T GO THROUGH A LOCKED STEEL GRATE!
            }
  - room117:
      description:
        - true:
            YOU ARE ON ONE SIDE OF A LARGE, DEEP CHASM.  A HEAVY WHITE MIST RISING
            UP FROM BELOW OBSCURES ALL VIEW OF THE FAR SIDE.  A SW PATH LEADS AWAY
            FROM THE CHASM INTO A WINDING CORRIDOR.
      items:
        - CHASM
        - TROLL
      entities:
      commands:
        - SW:
            {
              goto room118
            }
        - OVER,ACROSS,CROSS,NE:
            {
              if has TROLL then
              {
              println THE TROLL REFUSES TO LET YOU CROSS.
              }
              else
              {
              call unnamed725
              }
            }
        - *unnamed725:
            {
              if player.param32 != 0 then
              {
              println THERE IS NO LONGER ANY WAY ACROSS THE CHASM.
              }
              else
              {
              call unnamed726
              }
            }
        - *unnamed726:
            {
              # troll -> param33
              # chasm -> param32
              # bear -> param35
              # spice -> param63
              if player.param33 != 1 then
              {
                if player.param33 == 0 then
                {
                  player.param33 = 1
                }
                if !has BEAR then
                {
                  goto room122
                }
                else
                {
                  println JUST AS YOU REACH THE OTHER SIDE, THE BRIDGE BUCKLES BENEATH THE
                  println WEIGHT OF THE BEAR, WHICH WAS STILL FOLLOWING YOU AROUND.  YOU
                  println SCRABBLE DESPERATELY FOR SUPPORT, BUT AS THE BRIDGE COLLAPSES YOU
                  println STUMBLE BACK AND FALL INTO THE CHASM.
                  player.param32 = 1
                  player.param33 = 2
                  drop BEAR
                  move BEAR to room122
                  player.param35 = 3
                  if player.find63 == 0 then
                  {
                    player.treasuresUnableToFind += 1
                  }
                  global room.die
                }
              }
              else
              {
                println THE TROLL STEPS OUT FROM BENEATH THE BRIDGE AND BLOCKS YOUR WAY.
                player.param33 = 0
                remove TROLL2
                put TROLL
                remove TROLL2 from room122
                put TROLL in room122
                goto room117
              }
            }
        - JUMP:
            {
              if player.param32 != 0 then
              {
              global room.die21
              }
              else
              {
              call unnamed728
              }
            }
        - *unnamed728:
            {
              println I RESPECTFULLY SUGGEST YOU GO ACROSS THE BRIDGE INSTEAD OF JUMPING.
            }
  - room118:
      description:
        - true:
            YOU ARE IN A LONG WINDING CORRIDOR SLOPING OUT OF SIGHT IN BOTH
            DIRECTIONS.
      items:
      entities:
      commands:
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room72
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room117
            }
  - room119:
      description:
        - true:
            YOU ARE IN A SECRET CANYON WHICH EXITS TO THE NORTH AND EAST.
      onEntry:
        {
          globalOnEntry
          player.find62 = 1
        }
      items:
        - DRAGON
        - RUG
      entities:
      commands:
        - NORTH,N,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room69
            }
        - EAST,E,FORWARD,CONTINUE,ONWARD,ONWARDS:
            {
              println THE DRAGON LOOKS RATHER NASTY.
            }
  - room120:
      description:
        - true:
            YOU ARE IN A SECRET CANYON WHICH EXITS TO THE NORTH AND EAST.
      items:
      entities:
      commands:
        - NORTH,N:
            {
              goto room69
            }
        - EAST,E:
            {
              goto room74
            }
  - room121:
      description:
        - true:
            YOU ARE IN A SECRET CANYON WHICH EXITS TO THE NORTH AND EAST.
      onEntry:
        {
          globalOnEntry
          player.find62 = 1
        }
      items:
        - DRAGON
        - RUG
      entities:
      commands:
        - EAST,E,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room74
            }
        - NORTH,N,FORWARD,CONTINUE,ONWARD,ONWARDS:
            {
              println THE DRAGON LOOKS RATHER NASTY.
            }
  - room122:
      description:
        - true:
            YOU ARE ON THE FAR SIDE OF THE CHASM.  A NE PATH LEADS AWAY FROM THE
            CHASM ON THIS SIDE.
      items:
        - CHASM
        - TROLL
      entities:
      commands:
        - NE:
            {
              goto room123
            }
        - OVER,ACROSS,CROSS,SW:
            {
              if has TROLL then
              {
              println THE TROLL REFUSES TO LET YOU CROSS.
              }
              else
              {
              call unnamed739
              }
            }
        - *unnamed739:
            {
              # troll -> param33
              # chasm -> param32
              # bear -> param35
              # spice -> param63
              if player.param33 != 1 then
              {
                if player.param33 == 0 then
                {
                  player.param33 = 1
                }
                if !has BEAR then
                {
                  goto room117
                }
                else
                {
                  println JUST AS YOU REACH THE OTHER SIDE, THE BRIDGE BUCKLES BENEATH THE
                  println WEIGHT OF THE BEAR, WHICH WAS STILL FOLLOWING YOU AROUND.  YOU
                  println SCRABBLE DESPERATELY FOR SUPPORT, BUT AS THE BRIDGE COLLAPSES YOU
                  println STUMBLE BACK AND FALL INTO THE CHASM.
                  player.param32 = 1
                  player.param33 = 2
                  drop BEAR
                  move BEAR to room117
                  player.param35 = 3
                  if player.find63 == 0 then
                  {
                    player.treasuresUnableToFind += 1
                  }
                  global room.die
                }
              }
              else
              {
                println THE TROLL STEPS OUT FROM BENEATH THE BRIDGE AND BLOCKS YOUR WAY.
                player.param33 = 0
                remove TROLL2
                put TROLL
                remove TROLL2 from room117
                put TROLL in room117
                goto room122
              }
            }
        - JUMP:
            {
              println I RESPECTFULLY SUGGEST YOU GO ACROSS THE BRIDGE INSTEAD OF JUMPING.
            }
        - FORK:
            {
              goto room124
            }
        - VIEW:
            {
              goto room126
            }
        - BARREN:
            {
              goto room129
            }
  - room123:
      description:
        - true:
            YOU'RE IN A LONG EAST/WEST CORRIDOR.  A FAINT RUMBLING NOISE CAN BE
            HEARD IN THE DISTANCE.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room122
            }
        - EAST,E,FORK:
            {
              goto room124
            }
        - VIEW:
            {
              goto room126
            }
        - BARREN:
            {
              goto room129
            }
  - room124:
      description:
        - true:
            THE PATH FORKS HERE.  THE LEFT FORK LEADS NORTHEAST.  A DULL RUMBLING
            SEEMS TO GET LOUDER IN THAT DIRECTION.
            DOWN A GENTLE SLOPE.  THE MAIN CORRIDOR ENTERS FROM THE WEST.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room123
            }
        - NE,LEFT:
            {
              goto room125
            }
        - SE,RIGHT,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room128
            }
        - VIEW:
            {
              goto room126
            }
        - BARREN:
            {
              goto room129
            }
  - room125:
      description:
        - true:
            THE WALLS ARE QUITE WARM HERE.
            ROAR, SO LOUD THAT THE ENTIRE CAVE SEEMS TO BE TREMBLING.  ANOTHER
            PASSAGE LEADS SOUTH, AND A LOW CRAWL GOES EAST.
      items:
      entities:
      commands:
        - SOUTH,S,FORK:
            {
              goto room124
            }
        - NORTH,N,VIEW:
            {
              goto room126
            }
        - EAST,E,CRAWL:
            {
              goto room127
            }
  - room126:
      description:
        - true:
            YOU ARE ON THE EDGE OF A BREATH-TAKING VIEW.  FAR BELOW YOU IS AN
            ACTIVE VOLCANO, FROM WHICH GREAT GOUTS OF MOLTEN LAVA COME SURGING
            OUT, CASCADING BACK DOWN INTO THE DEPTHS.  THE GLOWING ROCK FILLS THE
            FARTHEST REACHES OF THE CAVERN WITH A BLOOD-RED GLARE, GIVING EVERY-
            THING AN EERIE, MACABRE APPEARANCE.  THE AIR IS FILLED WITH FLICKERING
            SPARKS OF ASH AND A HEAVY SMELL OF BRIMSTONE.  THE WALLS ARE HOT TO
            THE TOUCH, AND THE THUNDERING OF THE VOLCANO DROWNS OUT ALL OTHER
            SOUNDS.  EMBEDDED IN THE JAGGED ROOF FAR OVERHEAD ARE MYRIAD TWISTED
            FORMATIONS COMPOSED OF PURE WHITE ALABASTER, WHICH SCATTER THE MURKY
            LIGHT INTO SINISTER APPARITIONS UPON THE WALLS.  TO ONE SIDE IS A DEEP
            GORGE, FILLED WITH A BIZARRE CHAOS OF TORTURED ROCK WHICH SEEMS TO
            HAVE BEEN CRAFTED BY THE DEVIL HIMSELF.  AN IMMENSE RIVER OF FIRE
            CRASHES OUT FROM THE DEPTHS OF THE VOLCANO, BURNS ITS WAY THROUGH THE
            GORGE, AND PLUMMETS INTO A BOTTOMLESS PIT FAR OFF TO YOUR LEFT.  TO
            THE RIGHT, AN IMMENSE GEYSER OF BLISTERING STEAM ERUPTS CONTINUOUSLY
            FROM A BARREN ISLAND IN THE CENTER OF A SULFUROUS LAKE, WHICH BUBBLES
            OMINOUSLY.  THE FAR RIGHT WALL IS AFLAME WITH AN INCANDESCENCE OF ITS
            OWN, WHICH LENDS AN ADDITIONAL INFERNAL SPLENDOR TO THE ALREADY
            HELLISH SCENE.
      items:
        - VOLCANO
      entities:
      commands:
        - *setdark:
            {
              player.dark = 0
            }
        - SOUTH,S,PASSAGE,TUNNEL,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room125
            }
        - FORK:
            {
              goto room124
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,JUMP:
            {
              println DON'T BE RIDICULOUS!
            }
  - room127:
      description:
        - true:
            YOU ARE IN A SMALL CHAMBER FILLED WITH LARGE BOULDERS.
            VERY WARM, CAUSING THE AIR IN THE ROOM TO BE ALMOST STIFLING FROM THE
            HEAT.  THE ONLY EXIT IS A CRAWL HEADING WEST, THROUGH WHICH IS COMING
            A LOW RUMBLING.
      onEntry:
        {
          globalOnEntry
          player.find63 = 1
        }
      items:
        - SPICE
      entities:
      commands:
        - WEST,W,OUT,OUTSIDE,EXIT,LEAVE,CRAWL:
            {
              goto room125
            }
        - FORK:
            {
              goto room124
            }
        - VIEW:
            {
              goto room126
            }
  - room128:
      description:
        - true:
            YOU ARE WALKING ALONG A GENTLY SLOPING NORTH/SOUTH PASSAGE LINED WITH
            ODDLY SHAPED LIMESTONE FORMATIONS.
      items:
      entities:
      commands:
        - NORTH,N,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND,FORK:
            {
              goto room124
            }
        - SOUTH,S,D,DOWNWARD,DOWNWARDS,DOWN,DESCEND,BARREN:
            {
              goto room129
            }
        - VIEW:
            {
              goto room126
            }
  - room129:
      description:
        - true:
            YOU ARE STANDING AT THE ENTRANCE TO A LARGE, BARREN ROOM.  A SIGN
            POSTED ABOVE THE ENTRANCE READS:  "CAUTION!  BEAR IN ROOM!"
      items:
      entities:
      commands:
        - WEST,W,UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room128
            }
        - FORK:
            {
              goto room124
            }
        - EAST,E,INWARD,INWARDS,INSIDE,IN,BARREN,ENTER:
            {
              goto room130
            }
        - VIEW:
            {
              goto room126
            }
  - room130:
      description:
        - true:
            YOU ARE INSIDE A BARREN ROOM.  THE CENTER OF THE ROOM IS COMPLETELY
            EMPTY EXCEPT FOR SOME DUST.  MARKS IN THE DUST LEAD AWAY TOWARD THE
            FAR END OF THE ROOM.  THE ONLY EXIT IS THE WAY YOU CAME IN.
      onEntry:
        {
          globalOnEntry
          player.find64 = 1
        }
      items:
        - BEAR
        - CHAIN
      entities:
      commands:
        - WEST,W,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room129
            }
        - FORK:
            {
              goto room124
            }
        - VIEW:
            {
              goto room126
            }
  - room131:
      description:
        - true:
            YOU ARE IN A MAZE OF TWISTING LITTLE PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - WEST,W:
            {
              goto room107
            }
        - SE:
            {
              goto room132
            }
        - NW:
            {
              goto room133
            }
        - SW:
            {
              goto room134
            }
        - NE:
            {
              goto room135
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room136
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room137
            }
        - NORTH,N:
            {
              goto room138
            }
        - SOUTH,S:
            {
              goto room139
            }
        - EAST,E:
            {
              goto room112
            }
  - room132:
      description:
        - true:
            YOU ARE IN A LITTLE MAZE OF TWISTY PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - NW:
            {
              goto room107
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room131
            }
        - NORTH,N:
            {
              goto room133
            }
        - SOUTH,S:
            {
              goto room134
            }
        - WEST,W:
            {
              goto room135
            }
        - SW:
            {
              goto room136
            }
        - NE:
            {
              goto room137
            }
        - EAST,E:
            {
              goto room138
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room139
            }
        - SE:
            {
              goto room112
            }
  - room133:
      description:
        - true:
            YOU ARE IN A TWISTING MAZE OF LITTLE PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room107
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room131
            }
        - WEST,W:
            {
              goto room132
            }
        - NE:
            {
              goto room134
            }
        - SW:
            {
              goto room135
            }
        - EAST,E:
            {
              goto room136
            }
        - NORTH,N:
            {
              goto room137
            }
        - NW:
            {
              goto room138
            }
        - SE:
            {
              goto room139
            }
        - SOUTH,S:
            {
              goto room112
            }
  - room134:
      description:
        - true:
            YOU ARE IN A TWISTING LITTLE MAZE OF PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - NE:
            {
              goto room107
            }
        - NORTH,N:
            {
              goto room131
            }
        - NW:
            {
              goto room132
            }
        - SE:
            {
              goto room133
            }
        - EAST,E:
            {
              goto room135
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room136
            }
        - SOUTH,S:
            {
              goto room137
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room138
            }
        - WEST,W:
            {
              goto room139
            }
        - SW:
            {
              goto room112
            }
  - room135:
      description:
        - true:
            YOU ARE IN A TWISTY LITTLE MAZE OF PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - NORTH,N:
            {
              goto room107
            }
        - SE:
            {
              goto room131
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room132
            }
        - SOUTH,S:
            {
              goto room133
            }
        - EAST,E:
            {
              goto room134
            }
        - WEST,W:
            {
              goto room136
            }
        - SW:
            {
              goto room137
            }
        - NE:
            {
              goto room138
            }
        - NW:
            {
              goto room139
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room112
            }
  - room136:
      description:
        - true:
            YOU ARE IN A TWISTY MAZE OF LITTLE PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - EAST,E:
            {
              goto room107
            }
        - WEST,W:
            {
              goto room131
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room132
            }
        - SW:
            {
              goto room133
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room134
            }
        - SOUTH,S:
            {
              goto room135
            }
        - NW:
            {
              goto room137
            }
        - SE:
            {
              goto room138
            }
        - NE:
            {
              goto room139
            }
        - NORTH,N:
            {
              goto room112
            }
  - room137:
      description:
        - true:
            YOU ARE IN A LITTLE TWISTY MAZE OF PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - SE:
            {
              goto room107
            }
        - NE:
            {
              goto room131
            }
        - SOUTH,S:
            {
              goto room132
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room133
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room134
            }
        - NW:
            {
              goto room135
            }
        - NORTH,N:
            {
              goto room136
            }
        - SW:
            {
              goto room138
            }
        - EAST,E:
            {
              goto room139
            }
        - WEST,W:
            {
              goto room112
            }
  - room138:
      description:
        - true:
            YOU ARE IN A MAZE OF LITTLE TWISTING PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room107
            }
        - EAST,E:
            {
              goto room131
            }
        - NE:
            {
              goto room132
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room133
            }
        - WEST,W:
            {
              goto room134
            }
        - NORTH,N:
            {
              goto room135
            }
        - SOUTH,S:
            {
              goto room136
            }
        - SE:
            {
              goto room137
            }
        - SW:
            {
              goto room139
            }
        - NW:
            {
              goto room112
            }
  - room139:
      description:
        - true:
            YOU ARE IN A MAZE OF LITTLE TWISTY PASSAGES, ALL DIFFERENT.
      items:
      entities:
      commands:
        - SW:
            {
              goto room107
            }
        - NW:
            {
              goto room131
            }
        - EAST,E:
            {
              goto room132
            }
        - WEST,W:
            {
              goto room133
            }
        - NORTH,N:
            {
              goto room134
            }
        - D,DOWNWARD,DOWNWARDS,DOWN,DESCEND:
            {
              goto room135
            }
        - SE:
            {
              goto room136
            }
        - UPWARD,UPWARDS,UP,U,ABOVE,ASCEND:
            {
              goto room137
            }
        - SOUTH,S:
            {
              goto room138
            }
        - NE:
            {
              goto room112
            }
  - room140:
      description:
        - true:
            DEAD END
      items:
        - MACHINE
      entities:
      commands:
        - NORTH,N,OUT,OUTSIDE,EXIT,LEAVE:
            {
              goto room112
            }
  - death:
      description:
        - player.closing == 1:
            IT LOOKS AS THOUGH YOU'RE DEAD.  WELL, SEEING AS HOW IT'S SO CLOSE TO
            CLOSING TIME ANYWAY, I THINK WE'LL JUST CALL IT A DAY.
        - player.numdie == 0:
            OH DEAR, YOU SEEM TO HAVE GOTTEN YOURSELF KILLED.  I MIGHT BE ABLE TO
            HELP YOU OUT, BUT I'VE NEVER REALLY DONE THIS BEFORE.  DO YOU WANT ME
            TO TRY TO REINCARNATE YOU?
        - player.numdie == 1:
            YOU CLUMSY OAF, YOU'VE DONE IT AGAIN!  I DON'T KNOW HOW LONG I CAN
            KEEP THIS UP.  DO YOU WANT ME TO TRY REINCARNATING YOU AGAIN?
        - player.numdie == 2:
            NOW YOU'VE REALLY DONE IT!  I'M OUT OF ORANGE SMOKE!  YOU DON'T EXPECT
            ME TO DO A DECENT REINCARNATION WITHOUT ANY ORANGE SMOKE, DO YOU?
      onEntry:
      {
        player.numdie += 1
        if player.closing == 1 then
        {
          goto summary
        }
        if askYesNo then
        {
          if player.numdie < 3 then
          {
            if player.numdie == 1 then
            {
              println ALL RIGHT.  BUT DON'T BLAME ME IF SOMETHING GOES WR......
              println 		    --- POOF!! ---
              println YOU ARE ENGULFED IN A CLOUD OF ORANGE SMOKE.  COUGHING AND GASPING,
              println YOU EMERGE FROM THE SMOKE AND FIND....
            }
            else if player.numdie == 2 then
            {
              println OKAY, NOW WHERE DID I PUT MY ORANGE SMOKE?....	>POOF!<
              println EVERYTHING DISAPPEARS IN A DENSE CLOUD OF ORANGE SMOKE.
            }
            goto room3
          }
          else
          {
            println OKAY, IF YOU'RE SO SMART, DO IT YOURSELF!  I'M LEAVING!
            goto summary
          }
        }
        else
        {
          println OK
          goto summary
        }
      }
      items:
      entities:
      commands:
  - summary:
      description:
      onEntry:
        {
          global room.setscore
          print YOU HAVE SCORED A TOTAL OF 
          printval player.score
          println  POINTS, OUT OF A POSSIBLE MAXIMUM OF
          println 350 POINTS. DURING THIS GAME OF ADVENTURE, YOU HAVE TAKEN A TOTAL OF
          printval player.turns
          println  TURNS.
          print.
          if player.score <= 35 then
          {
            println YOU ARE OBVIOUSLY A RANK AMATEUR.  BETTER LUCK NEXT TIME.
            player.toNextRank = 36 - player.score
          }
          else if player.score <= 100 then
          {
            println YOUR SCORE QUALIFIES YOU AS A NOVICE CLASS ADVENTURER.
            player.toNextRank = 101 - player.score
          }
          else if player.score <= 130 then
          {
            println YOU HAVE ACHIEVED THE RATING: "EXPERIENCED ADVENTURER".
            player.toNextRank = 131 - player.score
          }
          else if player.score <= 200 then
          {
            println YOU MAY NOW CONSIDER YOURSELF A "SEASONED ADVENTURER".
            player.toNextRank = 201 - player.score
          }
          else if player.score <= 250 then
          {
            println YOU HAVE REACHED "JUNIOR MASTER" STATUS.
            player.toNextRank = 251 - player.score
          }
          else if player.score <= 300 then
          {
            println YOUR SCORE PUTS YOU IN MASTER ADVENTURER CLASS C.
            player.toNextRank = 301 - player.score
          }
          else if player.score <= 330 then
          {
            println YOUR SCORE PUTS YOU IN MASTER ADVENTURER CLASS B.
            player.toNextRank = 331 - player.score
          }
          else if player.score <= 349 then
          {
            println YOUR SCORE PUTS YOU IN MASTER ADVENTURER CLASS A.
            player.toNextRank = 350 - player.score
          }
          else if player.score == 350 then
          {
            println ALL OF ADVENTUREDOM GIVES TRIBUTE TO YOU, ADVENTURER GRANDMASTER!
            print.
            println TO ACHIEVE THE NEXT HIGHER RATING WOULD BE A NEAT TRICK! CONGRATULATIONS!!
          }
          else
          {
            println YOU JUST WENT OFF MY SCALE!!
          }
          if player.score < 350 then
          {
            print.
            print TO REACH THE NEXT QUALIFICATION LEVEL YOU NEED 
            printval player.toNextRank
            print  MORE POINTS.
          }
          print.
          quit
        }
      items:
      entities:
      commands:
start: welcome
